# 개발일지
- 매일 오후 4시 전까지 업데이트
- 개별적으로 각 폴더에 일일 개발일지를 작성

-------------------------------------------------------------
# 2022년 03월 08일
- 조원 소개, 조장 선출 및 주제 선정

조장 : 심다훈, 발표 : 홍성희

1) 패션 1111
https://dacon.io/competitions/official/235672/overview/description
https://www.kaggle.com/c/h-and-m-personalized-fashion-recommendations
https://www.slideshare.net/BOAZbigdata/15-boaz-marketin

- 소비자들이 샀던 옷들, 사진파일
- 정확한 트렌드와 패션 상품별 수요 예측
- 임종혁강사님: 브랜드 마다 신체치수가 달라 문제가 있을 수 있다, 사이즈에 대한 기준이 불명확

2) 음악 1111
https://www.slideshare.net/BOAZbigdata/15-boaz-251045079
https://arena.kakao.com/c/8/data
https://pearlluck.tistory.com/473?category=948498

- 상황 or 조건에 맞는 음악 추천
- 임종혁강사님: 엔지니어링, 사이언스 잘 나눠서 할 수는 있을듯…어려움?
- 웹서비스^^, DB구축
- 모델링 예측 서비스 구축

3) 농산물 가격 예측 11
https://dacon.io/competitions/official/235801/overview/description
https://www.nongnet.or.kr/index.do

- 농산물 가격 예측, 농넷 페이지 개선
- 대체 식품 추천
- 스마트팜? 스마트팜관련 가상의 관리 시스템 제안

4) 재난 트윗 1112222222222222
https://www.kaggle.com/c/nlp-getting-started
https://nurilee.com/2020/09/12/disaster-tweet-%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D-1%ED%8E%B8-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%90%EC%83%89/

- 트위터에서 재난 트윗들 text 분석
- text로 재난 여부를 확인할 수있을지~(희원님 자신있죠?)아니요
- 임종혁강사님: 재밌을 것같다??

5) 쇼핑11111
https://arena.kakao.com/c/1
https://tantara.medium.com/%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%95%84%EB%A0%88%EB%82%98-%EC%87%BC%ED%95%91%EB%AA%B0-%EC%83%81%ED%92%88-%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC-%EB%B6%84%EB%A5%98-%EB%8C%80%ED%9A%8C-%EB%A6%AC%EB%B7%B0-n%EC%A4%84-%EC%9A%94%EC%95%BD-c04e6e9d2606
https://www.slideshare.net/BOAZbigdata/15-boaz-251044971(화장품 리뷰)

- 수집할 데이터가 많다 / 네이버나 다음쇼핑 ssg , 범위가 너무 큼, 댓글분석, 추천, 가격예측 어느 방향으로? 

댓글분석으로 가면 리뷰로 맛집찾기, 악의적인 리뷰찾기, 돈받고 쓴건지 찐인건지
요기요 크롤링가능

6) 영화1
https://www.slideshare.net/BOAZbigdata/13-boaz-1-242107172?qid=91fee2b1-d863-4231-a12a-657e880fde92&v=&b=&from_search=31

- 리뷰로 스포리뷰 찾기

-------------------------------------------------------------

# 2022년 03월 10일

- 각 주제에 필요한 기술 찾아보기
1) 음악
	
	```
	- 파이썬과 테블로를 이용한 음악추천
	  https://ichi.pro/ko/python-eul-sayonghayeo-eum-ag-chucheon-siseutem-mandeulgi-226860192592217
	```
	
	```
	- 사용자가 선택한 장르에 맞춘 추천
	- 사용자가 선택한 음악과 비슷한 선택의 다른 사용자의 음악을 추천
	- 음악을 데이터로 분석하여, 비슷한 형태의 음악을 추천
	  https://brunch.co.kr/@kakao-it/342
	```
	
	```
	- 가사 분석을 통하여 음악 추천(논문)
	http://www.koreascience.or.kr/article/JAKO201808962644115.pdf
	- 가사에 대한 데이터를 "https://www.lyrics.co.kr/#gsc.tab=0" 를 통해 Mysql 로 DB화 하여 사용자의 선택에 따른 목록 생성
	```
	
	```
	- 감정패턴을 정의하여 상관관계 분석 후 음악 추천(논문)
	https://scienceon.kisti.re.kr/srch/selectPORSrchArticle.do?cn=JAKO201810866004037&dbt=NART
	```
	
	(위 방법을 혼합한 뒤 사용자로부터 피드백을 받는 부분도 있으면 좋을듯 함)
	
	

2. 농산물

   ```
   - 농산물에 대한 도메인 지식 필요
   ```

   

3. 쇼핑

   ```
   - 소셜 빅데이터 검색을 통한 데이터 추출
   - 연관된 단어를 분석하여 소비자가 원하는
   ```




- yolo 사용

- 사진 이미지를 잘 구분할 수 있는 데이터 세트

- 어떠한 상태를 인지할 수 있는 사진

- 

- 고기(축산) 관련 데이터 이용, 신선도, 부위 종류
  - https://www.nongsaro.go.kr/portal/ps/psz/psza/contentMain.ps?menuId=PS04112&pageIndex=1&pageUnit=20
  - https://scienceon.kisti.re.kr/srch/selectPORSrchArticle.do?cn=JAKO202016357498067&dbt=NART
  - https://aihub.or.kr/aidata/30733
  - https://aihub.or.kr/sites/default/files/Sample_data/%EA%B5%AC%EC%B6%95%ED%99%9C%EC%9A%A9%EA%B0%80%EC%9D%B4%EB%93%9C%EB%B6%81_2020-02/075.%EC%B6%95%EC%82%B0%EB%AC%BC_%ED%92%88%EC%A7%88%28QC%29_%EC%9D%B4%EB%AF%B8%EC%A7%80_%EB%8D%B0%EC%9D%B4%ED%84%B0_%EA%B5%AC%EC%B6%95_%EA%B0%80%EC%9D%B4%EB%93%9C%EB%9D%BC%EC%9D%B8.pdf
  
- yolo 이용해서 축산 분류 3명, 논문 리뷰 3명

- 두번째 목록 농산물 -> 고기 분류, 신선도

- 음식 이미지 데이터 찾기

  

-------------------------------------------------------------



# 2022년 03월 11일



- 이미지 음식에 대한 사진
- yolo 알고리즘을 활용한 시각장애인용 식사보조 시스템 개발 / https://www.koreascience.or.kr/article/JAKO202130053160358.pdf
- AI-Hub / https://aihub.or.kr/aidata/13594 (15만장 규모, 16gb)
- 구글 사진 / 셀레니움을 통한 크롤링

- 마스크 관련 사진 데이터셋 / https://public.roboflow.com/object-detection

- 논의 결과 아래와 같은 주제로 좁혀짐
  - yolo를 이용한 마스크 사용자 구분 및 사람 구분
  - 음악
  - 쇼핑
- yolo 의 경우 v4 를 사용할 지, v5 를 사용할지 고민해봐야 함. 장단점이 있음





# 2022년 03월 12일

# 
## 이봉림 멘토 / 국민은행 AI 센터
- 하둡 프레임워크(비정형이 많음)에서 데이터 수집
1. 플랫폼 개발(에너지 관제 시스템) -> 주요 특징, 주요 효과

2. 실무에서는 개념도를 통해 업무를 수행하게 된다.

   

## 김상인 멘토 / 신한은행 DS
- 팀빌딩 = 소통
  - 포밍 단계 : 목표, 역할, 팀의 방향을 정의
  - 스토핑 단계 : 규칙과 프로세스를 정의하고 종종 팀원의 역할을 재조정
  - 노밍 단계 : 표준, 절차 여러가지 기준에 대한 협의
  - 퍼포밍 단계 : 팀이 하나의 시스템처럼 기능을 수행



## 김은기 멘토 (커피어 패스 관련)



- 머신러닝 프로젝트(비쌈, 인건비, gpu, 리서터 -> 비용증가)

- 머신러닝 -> ML파이프라인 -> 생산성과 품질

- 데이터 수집 -> 처리 -> 도메인마다 반복 -> 자동화(mlops)



- 데이터 사이언티스트 -> 복합적, 주로 석사, 데이터마이닝, 비즈니스 해결

- 카카오 -> 수익창출을 위한 분석 -> 개발을 잘해야 함(자동화)

- 데이터 엔지니어 -> 백엔드엔지니어 -> 로그 축적(로그 스태쉬, 카프카, 데이터 웨어하우스) -> 백엔드 중요(장고) -> 트래픽(초당 몇십만건, 서비스 기업, 많은 사용자의 데이터 엑세스가 있는가?)이 많은 회사에 취업을 하면 좋음 -> 작은 회사는 rdb 로도 가능



- AI 리서터 -> 박사 -> 글로벌 현상 -> 페이퍼

- 리서터 제외 -> 석박사 중요



- 주니어 -> 태스크 끝나면

- 시니어 -> 오픈소스 생태계, 밸류 가치를 증명

- 결론 : 모델 -> 다양한 플랫폼 -> 배포 -> 가치 증명(수익창출)

\------------------------------------------------------------

1) 언어

- 파이썬

- 철학을 이해할 수 있는가? - 겉핥기 식은 위험하다(파이토치와 텐서플로우는 왜 써야 하는가?)

- 트렌디한 관심

- python 3.10 에서 무엇이 변경되었는가? 등의 히스토리를 알 고 있어야 함. 내가 사용하는 패키지의 장단점을 알고 있어야함.

- 혼자서 해결하는 능력



2) 프로젝트

- 모두 참여

- 미션

- 내가 맡은 미션은 반드시 해결

- 협업 툴을 많이 사용해 볼 것(슬랙, 카카오 워크)

- 구글 코랩 프로(한달 9천원에 강력한 GPU 사용가능)

- 가장 중요한 것 : ***\*(문서 작성 능력)\****

- 깃허브를 혹은 노션을 통한 이력서 작성 (기술 프론트엔드, 백엔드 등 자신의 기술들을 이력서에 잘 기술해야함)

- 타임라인을 작성해도 좋음.

- 깃허브 로드맵 (어떤 것을 배워야 하는가에 대한 길)을 공부해야함.

- MLOps 검색을 할때 블로그 100개보다 깃허브에서 정확한 문서를 보는 것이 더 정확함.

- 깃허브에서 '카카오페이'등 키워드를 검색하면 사전 과제에 대해 올라와 있음.



3) 이력서(이력서 2세트, 온라인 1세트)

- 원티드, 스택쉐어, 로켓펀치, 잡플래닛, 리멤버, 프로그래머스



4) 자격증 : 구글 클라우드, aws, k9s, sqld, ads



5) 도서

- devops

- 세미나



6) 해커톤

- 어중간한 해커톤은 별로

- 금융권(신한,KB 등), 카카오 아레나, 네이버 클로바 등에 참여하는 것이 좋음.

- 인력을 뽑은 회사를 가지말고, ***\*인재를 뽑는 회사를 가야함\****



## 남영우 멘토

- 백엔드 개발자 

- 백엔드 개발자 역할 확장

- 백엔드 DB와 API 서버 개발 중심이었으나, 데이터 분석을 위한 엔지니어링이나, 분산파일시스템 / DBMS 제품 개발까지 영역 확장 전문성을 가진 영역으로 구분 (웹 어플리케이션 개발이 중요)

- 백엔드의 DB와 API 서버 개발

- 데이터 엔지니어링

- 분산파일시스템

- DBMS

- REST API : 엄격한 의미로 REST 네트워크 아키텍처 원리의 모음. 자원을 정의하고 자원에 대한 주소를 지정하는 방법 전반을 일컫는다.

-------------------------------------------------------------



### 프로젝트 관련 질의응답

1) 하둡, 카프카 대용량 데이터가 아니기 때문에 굳이 쓸 필요가 있는가?

2) 2번제 주제의 소주제를 잘 합쳐보는 것이 괜찮아 보임,

3) 몽고 db 나 mySQL 등 다 사용할 필요가 있는가? 정형, 비정형 데이터를 몽고DB로 전부 커버할 수 있지 않은가?

4) 하둡위에 도커가 가능하지 않음(기간안에 쉽지 않음) 

5) openCV 를 이용하여 Yolo5 구현도 괜찮음 -> 수화를 번역하는 프로젝트도 괜찮음

6) yolo5 는 스트리밍을 지원함. 

7) 묻어가는 것이 아닌 확실한 아레나를 정하고 함께 가야함.

8) 캐글의 데이터만으로 가능한가? 볼륨에 따라 다르기 때문에 알고리즘 선택이 중요하고, 더 좋은건 크롤링, API 를 통해 직접 서비스를 확인해보는 것도 좋음.

9) 쉽게 아마존에 올릴 수 있는것은 yolov5 입니다.





# 2022년 03월 14일



- yolov5 를 이용한 마스크, 좌석 서비스에 대한 논의

- 얼굴이 다 보이는 곳에 자리가 배치되어 있음.(가정)
  - 사용자 혹은 관리자 중 누구에게 알람을 가게 해야 하는가? -> 업체측에 서비스를 제공
  - 들어올 때 마스크 착용 여부
  - 앉아 있는 인원들의 마스크 관련 알람
  - 좌석 정보를 제공
    - 빈자리가 얼마나 되었는가에 대한 시간 제공.
  - 주요 기능, 주요 타겟, 효과 등을 정리
  - 프로젝트 수행도구 및 목적 정리

- Dart, Flutter 에 대한 구현 확인(용현님, 현호님)

  



-------------------------------------------------------------



# 2022년 03월 15일



## 1.  플러터 설치 및 설정

- 웹/앱을 구현하기 위해 플러터/Dart 공부
- 안드로이드 스튜디오 설치 / SDK 환경변수 설정



## 2. 기본 위젯 4개

- stless + tab : 기본
- 글자위젯
- 이미지위젯
- 아이콘위젯
- 박스위젯

```dart
## main.dart 수정

import 'package:flutter/material.dart';

// 앱 시작해주세요 요청(메인페이지 실행)
void main() {
  runApp(const MyApp());
}
// stless + tab : MyApp 이라는 메인화면 만들기
class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {

    return MaterialApp(
      home: Text("안녕")		# device section 선택 후 shift + F10 : 디버그 모드
      home: Icon(Icons.star)
      home: Image.asset('사진.jpg') # 원래는 "assets/사진.jpg" 가 맞으나 생략가능
        # 이미지를 넣고 싶다면 프로젝트 폴더 안에 이미지가 있어야함.
        # 이 후 이미지를 assets 폴더에 넣고, 이미지를 등록까지 해야 사용가능함.
        # pubspec.yaml(앱 만들때 필요한 모든 자료를 정리한 파일, 외부패키지 등)
      home: Container(width :50, height: 50, color: Colors.blue)
        # SizedBox 도 가능
        # flutter 의 단위는 LP이며, 50LP = 1.2cm 정도임
        # 어디서부터 50 인지 시작점을 정해야함. 따라서 Child 를 통해 위젯 안에 위젯 넣기 가능
        # home: Center(
        child : Container(width :50, height: 50, color: Colors.blue), 로 해야함
      
    );
  }
}
```

```
# pubspec.yaml 에서 assets: 추가
flutter:
  assets:
    - assets/
```



## 3. 가로세로 배치하는 법과 Scaffold

```dart
- MaterialApp을 확인해보자(구글 스타일의 디자인 및 커스터마이징시 사용해야함)
- 상중하 디자인
home: Scaffold(
          appBar : AppBar(),					# 상단
          body : Container(),					# 중단
          bottomNavigationBar : BottomAppBar(),	# 하단

```

```
# 여러 위젯 가로로 배치하는 법 - Row(children :[])

home: Scaffold(
          body : Row(
            children : [
              Icon(Icons.star),
              Icon(Icons.star),
              Icon(Icons.star),
            ],
          ),
```

```
# 여러 위젯 세로로 배치하는 법

home: Scaffold(
          body : Column(
            children : [
              Icon(Icons.star),
              Icon(Icons.star),
              Icon(Icons.star),
            ],
          ),
```

```dart
return MaterialApp(
      home: Scaffold(
          body : Row(
            // 가로축 정렬
            mainAxisAlignment: MainAxisAlignment.spaceEvenly,	// 균등하게 가로축 정렬
            // 세로축 정렬
            crossAxisAlignment: CrossAxisAlignment.center,
            children : [
              Icon(Icons.star),
              Icon(Icons.star),
              Icon(Icons.star),
            ],
```



```
```



```
# 오류 코드 안뜨게 설정
Prefer const literals as parameters of constructors on @immutable classes. (Documentation)

# analysis_options.yaml 설정

rules:
    prefer_typing_uninitialized_variables : false
    prefer_const_constructors_in_immutables : false
    prefer_const_constructors : false
    avoid_pring : false
    prefer_const_literals_to_create_immutables : false (추가)
```



## 4. 박스 만들기 실습

```Dart
import 'package:flutter/material.dart';

// 앱 시작해주세요 요청(메인페이지 실행)
void main() {
  runApp(const MyApp());
}
// stless + tab : MyApp 이라는 메인화면 만들기
class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {

    return MaterialApp(
      home: Scaffold(
          appBar: AppBar( title : Text("앱임")),  // title 앱의 제목
          body : Text("안녕"),
          bottomNavigationBar : BottomAppBar(
            // row() 안에서 왼쪽 전구 버튼을 통해, Container 로 감싸기가 가능하다.
            // width, height, child 만 필요한 박스는 SizedBox() 이다. 더 가볍다
            child : SizedBox(
              height : 100,
              child: Row(
                mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                children: [
                Icon(Icons.phone),
                Icon(Icons.message),
                Icon(Icons.contact_page),
                ],
           ),
            )
         ),
      )
    );
  }
}

```

```
# 박스 디자인하기
# 바깥 여백
body : Container(
            width:50, height: 50, color : Colors.blue,
            margin : EdgeInsets.all(20),
          ),
          
# 개별 여백 주기
body : Container(
            width:150, height: 100, color : Colors.blue,
            // 개별 여백 주기
            padding : EdgeInsets.fromLTRB(0,30,0,0)
          ),
          
# 박스에 테두리 주기(데코레이션 박스를 사용해야한다)
body : Container(
            width:150, height: 100,
            // 데코레이션 사용시 중복으로 색상설정이 불가
            decoration: BoxDecoration(
              border: Border.all(color : Colors.black)
            ),
          ),
```

```\
# 박스 위치 정렬(Container 드래그 후 전구 클릭 후 감싸기)

body : Align(
            alignment: Alignment.topCenter,
            child: Container(
              width:150, height: 100, color : Colors.blue,
        ),
          ),

```

```
# 박스 width 가로로 꽉차게

body : Align(
            alignment: Alignment.topCenter,
            child: Container(
              width: double.infinity, height: 100, color : Colors.blue,
        ),
          ),
```



### 5. 글꼴 디자인 및 AppBar

```
# 글자디자인은 Text() style : 안에 넣어야함
body : SizedBox(
            child : Text("안녕하세요",
              style : TextStyle(color : Colors.red),
            ),
          ),
          
# Color 직접 입력
body : SizedBox(
            child : Text("안녕하세요",
              style : TextStyle(color : Color(0xffaaaaaa)),
            ),
          ),
```

````
# 폰트 두께
body : SizedBox(
            child : Text("안녕하세요",
              style : TextStyle( fontWeight : FontWeight.w700 ),
            ),
          ),
```

```
# 아이콘에서 색상, 크기를 지정이 가능
body : SizedBox(
            child : Icon(Icons.star,),
            ),
```

```
# 버튼 종류 3가지 - TextButton(), IconButton(), ElevatedButton()
# 버튼에는 두개의 파라미터가 필수 : (child : , onPressed: (){},)
# ElevatedButton : 물결 효과가 있음

body : SizedBox(
            child : ElevatedButton(
              child : Text("글자"),
              onPressed: (){},
             )
            ),

```

```
# 별모양 버튼
body : SizedBox(
            child : IconButton(
              icon : Icon(Icons.star),
              onPressed: (){},
             )
            ),
```



```
# AppBar 위젯에서 자주 사용하는 목록
# title : 제목
# leading : 

home: Scaffold(
    appBar: AppBar( leading : Icon(Icons.star), title : Text("버튼")),  // title 앱의 제목
       body : SizedBox(),
            ),
            
            
home: Scaffold(
          appBar: AppBar( actions :[Icon(Icons.star), Icon(Icons.star)], title : Text("버튼")),  // title 앱의 제목
          body : SizedBox(),
            ),
          );
```



```
# 레이아웃 잘 짜는 팁
1. 예시디자인 준비(원화, 원본)
2. 예시화면에 네모 그리기
3. 바깥 네모부터 하나하나 위젯으로 만들기
4. 마무리 디자인
```



## 6. Flexible

```
ody : Row(
            children:[
              Flexible(child: Container(color : Colors.blue), flex : 3),
              Flexible(child: Container(color : Colors.green), flex : 3),
              Flexible(child: Container(color : Colors.red), flex : 3),
            ],
          )
```

```
# Expanded : flex를 1만 가지고 있고 나머지를 채움

body : Row(
            children:[
              Expanded(child: Container(color : Colors.blue)),
              Container(width : 100, color : Colors.green),
            ],
          )
```

```
# 박스 디자인했는데 의도와 다르다면
1. 사이즈를 먼저 확인
2. 박스 위치를 확인
3. DevTools 를 통해 확인해볼 것. (Run 후 하단의 DevTool의 파란 버튼을 눌러볼것 )
```


````

##  

```
- yolov5 연결
https://github.com/ultralytics/yolov5/issues/686

- 플러터 백엔드 관련
- https://www.django-rest-framework.org/
- https://developer.mozilla.org/ko/docs/Learn/Server-side/Django/Admin_site

- flutter(AWS), Django Rest framework 확인필요
```







# 2022년 03월 16일

## Django Rest Framework 공부

- Flutter(프론트 엔드) 공부
- Django Rest Framework (백엔드) 공부
- (아직 못함) Django 레플로 API 서버 만들고 플러터와 연동해보기
- Flutter 공부해보기

- API - 응용프로그램 데이터를 주고 받는 규약
- REST API - Json 형태로 웹 CRUD 데이터를 주고 받는 규약
- 장고 Django Rest Framework 는 Django안에서 RESTful API 서버를 쉽게 구축할 수 있도록 도와주는 오픈소스 라이브러리임.
- 욜로 결과를 장고 백엔드로 받을 수 있는 방법?
- 실시간으로 데이터를 인식한 후 결과값이 어떻게 반환이 되는가?
- 실시간으로 받는데에는 Node js (자바스크립트) 가 용이하지만 Django로 커버 가능.
- 실시간으로 자료를 받아온다고 하면 그것을 DB로 저장해야할 필요가 있는가?
- PyTorch Hub(파이썬을 위한 오픈소스 머신 러닝 라이브러리, GPU 연산이 가능)를 이용하여 result 값을 pandas, json 로 받을 수 있음.

```
- https://pytorch.org/hub/ultralytics_yolov5/
- https://github.com/ultralytics/yolov5/issues/36
- https://blog.daum.net/geoscience/1646
```

- 플러터, 장고 admin 로그인해서 관리하는 부분 및 공부할 것



## 회의

- 샘플이 되는 장소를 하나 정해야 할 것 같음(멀티캠퍼스 장소를 대여할 수 있는가?)
- 빈테이블, 테이블 위의 물건, 사람에 따라 Full, not Full 판단을 해야함.
- 웹캠 여부, 폰으로도 yolo연결 후 구동이 가능한가? 어플을 이용하여 가능함.
- AWS 상에서도 구동이 가능한가?





# 2022년 03월 17일

- 안드로이드 스튜디오를 이용하여 샘플 앱 실행해보기
- 위젯 -> UI 를 만들고 구성하는 모든 기본 단위 요소(눈에 보이지 않는 요소들까지 위젯)
- 위젯의 종류
  - Stateless Widget 
    - 이전 상호작용의 어떠한 값도 저장하지 않음
    - 상태가 없는 정적인 위젯
    - 스크린상에 존재만 할 뿐 아무것도 하지 않음
    - 어떠한 실시간 데이터도 저장하지 않음
    - 어떤 변화(모양,상태)를 유발시키는 value 값을 가지지 않음.
  - Stateful Widget
    - Value 값을 지속적으로 추적 보존
    - 계속 움직임이나 변화가 있는 위젯
    - 사용자의 인터랙션에 의해 모양이 변화함
    - 데이터를 받게 되었을 때 모양이 바뀜
  - Inherited Widget
- 위젯은 "트리구조"로 정리될 수 있음
- 한 위젯내에 얼마든지 다른 위젯들을 넣을 수 있음.(부모=parent, container), (자식=child, chiildren) 관계
- MyApp -> MaterialApp -> MyHomePage(커스텀 위젯) -> Scaffold(앱 화면과 기능 구성, 빈페이지를 준비)
- Scaffold -> AppBar(화면의 가장 상단) -> Text(앱바에 속하는 텍스트 바)
- Scaffold -> Center(화면의 중간) -> Column -> Image, TextField, Button

-----------------------------------------------

- pubspec.yaml : 프로젝트의 버전, 사용환경, Dart의 설정 등을 관리, 필요 중요한 내용을 등록
- lib -> main.dart 가 중요

```dart
import 'package:flutter/material.dart';	// 반드시 처음에 import 할 것.

void main() => runApp(MyApp());  // runApp 안에는 위젯 함수 요소가 들어있어야 함

// MyApp 위젯을 직접 만들어야 함.

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "First app" ,
      theme : ThemeData(
        primarySwatch: Colors.blue
      ),
      home: MyHomePage(),
    );
  }
}

// 본격적으로 앱 화면에 보여질 앱페이지 생성(먼저 Scaffold 위젯, 빈 도화지 역할)
class MyHomePage extends StatelessWidget {
  const MyHomePage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("First App"), // 앱 바 내에서는 Text 위젯을 불러와야함.

      ),
      body: Center(
        child: Column(
          children: [
            Text('Hello'),
            Text('Hello'),
            Text('Hello')
          ],
        ),  // 자신의 위젯내의 모든 파일을 세로로 위치함
      ),

    );
  }
}


```

- main(), runApp() : 함수의 이름은 소문자로 시작
- MyApp() : 클래스는 대문자로 시작(위젯이 클래스와 관련이 있음)
- 카멜케이스 문법을 사용함.

```
import 'package:flutter/material.dart';

void main() => runApp(MyApp());  // runApp 안에는 위젯 함수 요소가 들어있어야 함

// MyApp 위젯을 직접 만들어야 함.

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "Charactor card",
      home: Grade(),
    );
  }
}

class Grade extends StatelessWidget {
  const Grade({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.amber[800],
    appBar: AppBar(
    title : Text("BBANTO"),
        backgroundColor: Colors.amber[700],
        centerTitle: true,
        elevation : 0.0,    // 입체감 제거
    ),
    body : Center(        // 가로 중단으로 맞춰줌
      child: Column(
          mainAxisAlignment: MainAxisAlignment.center,  // 콜럼 내에서 세로 중단으로 맞춰줌
          children: [
            Text("Hello"),
            Text("Hello"),
            Text("Hello"),
          ],
        ),
    ),

    );
  }
}

```

- 장고 공부가 필요함.



## 개발

- 로그인 이 후 페이지 생성(매장 내 관리, 출입관리 팝업) 예정
- 매장 내 관리, 출입관리 페이지를 만들기 위한 플러터 공부 -> 용현님과 대화 결과 장고에 대한 공부를 더 해야할 것 같습니다.

## 회의

- 핸드폰 등 외부 카메라로도 yolov5 인식이 가능.
- 변수를 받아오는 것은 확인. (혹시 실시간으로 DB 저장 없이 가능한가?)
- yolov5 에서 2개의 웹캠이 사용 가능한지는 확인 더 필요함.
- 핸드폰 카메라를 통하여 주피터 노트북에서 구동이 가능한가? 깃허브로 구동이 가능한가?
- 장고의 경우 admin 관리 api 구동 관리를 우선적으로 공부해야함.

## 이슈 

- 마스크 및 테이블 사진을 위하여 장소 섭외 문제



# 2022년 03월 18일

```dart
// SizedBox 를 이용하여 두 텍스트 사이의 가로, 세로 간격을 맞춤
//------------------------------------------------------------------------------
import 'package:flutter/material.dart';

void main() => runApp(MyApp());  // runApp 안에는 위젯 함수 요소가 들어있어야 함

// MyApp 위젯을 직접 만들어야 함.

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "Charactor card",
      home: Grade(),
    );
  }
}

class Grade extends StatelessWidget {
  const Grade({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.amber,
    appBar: AppBar(
    title : Text("BBANTO"),
        backgroundColor: Colors.amber[700],
        centerTitle: true,
        elevation : 0.0,    // 입체감 제거
    ),
    body: Padding(
        padding: EdgeInsets.fromLTRB(30.0, 40.0, 0.0, 0.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start, // 시작점 정렬을 맞춤.
          children: [
            Text("Name", style: TextStyle(
              color: Colors.white,
              letterSpacing: 2.0, // 철자간의 간격을 넓게
            ),
            ),
            SizedBox(
              height: 10.0,
            ),
            Text("BBANTO",
            style: TextStyle(
              color : Colors.white,
              letterSpacing: 2.0,
              fontSize: 28.0,
              fontWeight: FontWeight.bold // 글자의 굵기
            ),
            ),
          ],
        ),
    ),

    );
  }
}

```



### 마무리 완성본

```
import 'package:flutter/material.dart';

void main() => runApp(MyApp());  // runApp 안에는 위젯 함수 요소가 들어있어야 함

// MyApp 위젯을 직접 만들어야 함.

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: "Charactor card",
      home: Grade(),
    );
  }
}

class Grade extends StatelessWidget {
  const Grade({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.amber[800],
    appBar: AppBar(
    title : Text("       포켓몬스터"),
        backgroundColor: Colors.amber[700],
        centerTitle: true,
        elevation : 0.0,    // 입체감 제거
    ),
    body: Padding(
        padding: EdgeInsets.fromLTRB(30.0, 40.0, 0.0, 0.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start, // 시작점 정렬을 맞춤.
          children: [
            Center(
              child: CircleAvatar(
                backgroundImage: AssetImage('assets/1.jpg'), // 한글명칭은 사용이 안됨.
                radius: 60.0,
              ),
            ),
            Divider(            // 사진과 아래 글 사이에 선을 만들어 구분하기
              height: 60.0,     // Divider 위쪽, 아래쪽으로 각각 30 의 간격으로 설정.
              color: Colors.grey[850],
              thickness: 0.5,
              endIndent: 30.0,    // 디바이더 선이 끝에서 어느정도 떨어져야 하는가(초반에 padding 값을 30.0으로 하였음)
            ),
            Text("Name", style: TextStyle(
              color: Colors.white,
              letterSpacing: 2.0, // 철자간의 간격을 넓게
            ),
            ),
            SizedBox(
              height: 10.0,
            ),
            Text("강챙이",
            style: TextStyle(
              color : Colors.white,
              letterSpacing: 2.0,
              fontSize: 28.0,
              fontWeight: FontWeight.bold // 글자의 굵기
            ),
            ),
            SizedBox(
              height: 30,
            ),
            Text("Pokemon POWER LEVEL", style: TextStyle(
              color: Colors.white,
              letterSpacing: 2.0, // 철자간의 간격을 넓게
            ),
            ),
            SizedBox(
              height: 10.0,
            ),
            Text("14",
              style: TextStyle(
                  color : Colors.white,
                  letterSpacing: 2.0,
                  fontSize: 28.0,
                  fontWeight: FontWeight.bold // 글자의 굵기
              ),
            ),
            SizedBox(
              height: 30.0,
            ),
            Row(
              children: [
                Icon(Icons.check_circle_outline),
                SizedBox(
                  width: 10.0,
                ),
                Text("파도타기",
                style: TextStyle(
                  fontSize: 16.0,
                  letterSpacing: 1.0
                ),),
              ],
            ),
            Row(
              children: [
                Icon(Icons.check_circle_outline),
                SizedBox(
                  width: 10.0,
                ),
                Text("괴력",
                  style: TextStyle(
                      fontSize: 16.0,
                      letterSpacing: 1.0
                  ),),
              ],
            ),
            Row(
              children: [
                Icon(Icons.check_circle_outline),
                SizedBox(
                  width: 10.0,
                ),
                Text("폭포오르기",
                  style: TextStyle(
                      fontSize: 16.0,
                      letterSpacing: 1.0
                  ),),
              ],
            ),
            SizedBox(
              height: 10.0,
            ),
            Center(
              child : CircleAvatar(
                backgroundImage: AssetImage("assets/2.jpg"),
                radius: 40.0,
                backgroundColor: Colors.amber[800], //사진이 png 일 경우 배경을 동일하게 만들 수 있다.
              ),
            ),
            SizedBox(
              height: 10.0,
            ),
            Text("상성 : 두트리오",
            style: TextStyle(
              color : Colors.white,
              fontSize: 28.0,
              fontWeight: FontWeight.bold
             ),
            ),
          ],
        ),
    ),

    );
  }
}

```



```
// SizedBox를 이용하여 hegiht, width 를 잘 사용하여 간격을 맞추어 보자
// , 콤마를 항상 주의하자. syntax error
// 사진파일 추가시, project1 에 assets 폴더를 만든 뒤, 사진을 넣고 이후 pubspec.yaml을 수정한다
// assets:
     - images/a_dot_burr.jpeg
     - images/a_dot_ham.jpeg
// 주석처리를 해제한 후, 경로와 이름을 설정.

// - 이미지 'Unable to load asset' 이슈 발생
// Android SDK 구동시 이미지 로드가 되지 않는다면, 사진의 이름은 한글이어야 하며,
// terminal 에서 flutter clean 코드 실행 후 다시 작동시켜본다
// pubspec.yaml 에서 assets 이미지 경로를 각각 지정해야 SDK 툴에서 제대로 로드 되는 듯 하다.
```

```dart
// 화면상단의 Debug 마크를 지우고 싶다면?
class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,		// <== false 로 해야 사라짐!
      title: "Charactor card",
      home: Grade(),
    );
  }
}
```



## 클래스와 위젯

- Class 
  - 클래스 : 객체가 가져야 하는 속성과 기능을 정의한 내용을 담고 있는 설계도 역할
  - 객체 : 클래스가 정의된 후 메모리 상에 할당되었을 때 이를 객체라고 함.
  - 인스턴스 : 클래스를 기반으로 생성되며, 클래스의 속성과 기능을 똑같이 가지고 있고 프로그래밍 상에서 사용되는 대상
  - 속성 : 액정, 카메라 모듈, 홈버튼, 스크린
  - 기능 : 전화걸기, 사진 찍기, 인터넷 검색
  - 설계도면대로 만들어진 것을 '인스턴스'라고 한다.
  - 변수 : 항상 변하는 값
- 구글에서 Dartpad 검색

```dart
// 현재 플러터 업데이트로 null 값 오류가 남, 변수값을 초기화해야함.

class Person{
  String name = "" ;
  int age = 0;
  String sex = "";
}

void main(){
  
  Person p1 = new Person();
  p1.age  = 30;
  print(p1.age);
}

// run 을 누르면 콘솔 화면에 30이라고 나온다.
```

- 클래스 내에 생성자를 가지고 있다면, 입력 받을 때 반드시 변수값이 있어야함.
- 플러터 2.0 으로 오면서 변수의 값을 선언만하면 에러가 나므로, 타입 뒤에 물음표를 추가

```dart
class Person{
  String? name ;
  int? age ;
  String? sex ;
  
  Person(String name, int age, String sex){
        this.name = name ;
        this.age = age ;
        this.sex = sex ;
  }
}

void main(){
  Person p1 = new Person("Lee",15,"male");
  Person p2 = new Person("Tom",20,"female");
  print(p1.age);
  print(p2.age);
}
//15, 20 이 출력됨을 알 수 있다.
```

- named argument 를 이용하여 전체가 아닌, 일부 인스턴스에만 변수값 입력이 가능하다.

- Widget(위젯) 은 클래스이기도 하나 엄밀히 말하면 인스턴스이다.



### AppBar 아이콘 버튼 추가

```
// leading : 아이콘 버튼이나 간단한 위젯을 왼쪽에 배치할 때 사용
// actions : 복수의 아이콘 버튼 등을 오른쪽에 배치할 때
// onPressed : 함수의 형태로 일반 버튼이나 아이콘 버튼을 터치했을 때 일어나는 이벤트를 정의한 곳
```

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title : "AppBar",
      theme : ThemeData(
        primarySwatch: Colors.red
      ),
      home : MyPage(),
    );
  }
}

//stless 위젯만들고 MyPage 위젯을 만들고, scatterfold 만든 뒤 appBar 를 불러오기

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title : Text("Appbar icon menu"),
        centerTitle: true,
        elevation: 0.0,
        leading : IconButton(
            icon: Icon(Icons.menu),
            onPressed: () {
              print('menu button is cliked');
            },
        ), // 간단한 위젯이나 아이콘 위치 가능.
        actions : [
          IconButton(
          icon: Icon(Icons.shopping_cart),
          onPressed: () {
              print('Shopping cart button is cliked');
            },
          ),
          IconButton(
            icon: Icon(Icons.search),
            onPressed: () {
              print('search button is cliked');
            },
          ),
        ],
      ),
    );
  }
}
```



### Drawer 메뉴 만들기

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title : "AppBar",
      theme : ThemeData(
        primarySwatch: Colors.red
      ),
      home : MyPage(),
    );
  }
}

//stless 위젯만들고 MyPage 위젯을 만들고, scatterfold 만든 뒤 appBar 를 불러오기

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title : Text("Appbar icon menu"),
        centerTitle: true,
        elevation: 0.0,

        actions : [
          IconButton(
          icon: Icon(Icons.shopping_cart),
          onPressed: () {
              print('Shopping cart button is cliked');
            },
          ),
          IconButton(
            icon: Icon(Icons.search),
            onPressed: () {
              print('search button is cliked');
            },
          ),
        ],
      ),
      drawer: Drawer(
        child : ListView(
          padding : EdgeInsets.zero,
          children: [
              // 복수의 위젯을 세로로 나열해주며, 각 리스트 타일마다 배치가 필요.
            UserAccountsDrawerHeader(
              currentAccountPicture: CircleAvatar(
                backgroundImage: AssetImage("assets/1.jpg"),
                backgroundColor: Colors.white,
              ),
              accountName: Text("강챙이"),
              accountEmail : Text('강챙이@google.com'),
              onDetailsPressed:(){
                print('arrow is clicked');
              },
              decoration: BoxDecoration(
                color : Colors.red[400],
                borderRadius: BorderRadius.only(
                  bottomLeft: Radius.circular(40.0),
                  bottomRight: Radius.circular(40.0),
                )
              ),
            ),
          ],
        ),   
      ),
    );
  }
}
```



### Drawer 메뉴 만들기2

- onPressed 함수 : 주로 버튼에 사용
- onTab 함수 : 제스쳐디텍터 , InkWell (오래 누르기, 두번 탭하기) 에 사용

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title : "AppBar",
      theme : ThemeData(
        primarySwatch: Colors.blue
      ),
      home : MyPage(),
    );
  }
}

//stless 위젯만들고 MyPage 위젯을 만들고, scatterfold 만든 뒤 appBar 를 불러오기

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title : Text("SM7 테스트 화면"),
        centerTitle: true,
        elevation: 0.0,

        actions : [
          IconButton(
          icon: Icon(Icons.shopping_cart),
          onPressed: () {
              print('Shopping cart button is cliked');
            },
          ),
          IconButton(
            icon: Icon(Icons.search),
            onPressed: () {
              print('search button is cliked');
            },
          ),
        ],
      ),
      drawer: Drawer(
        child : ListView(
          padding : EdgeInsets.zero,
          children: [
            UserAccountsDrawerHeader(
              currentAccountPicture: CircleAvatar(
                backgroundImage: AssetImage("assets/1.jpg"),
                backgroundColor: Colors.white,
              ),
              otherAccountsPictures: [
                CircleAvatar(
                  backgroundImage: AssetImage("assets/2.jpg"),
                  backgroundColor: Colors.white,
                ),
                // CircleAvatar(
                //   backgroundImage: AssetImage("assets/2.jpg"),
                //   backgroundColor: Colors.white,
                // ),
              ],
              accountName: Text("강챙이"),
              accountEmail : Text('강챙이@google.com'),
              onDetailsPressed:(){
                print('arrow is clicked');
              },
              decoration: BoxDecoration(
                color : Colors.blue[400],
                borderRadius: BorderRadius.only(
                  bottomLeft: Radius.circular(40.0),
                  bottomRight: Radius.circular(40.0),
                )
              ),
            ),
            ListTile(
              leading: Icon(Icons.home,
                color : Colors.grey[800],
              ),
              title : Text("Home"),
              onTap: (){
                print("Home is cliked");
              },
              trailing: Icon(Icons.add),// 우측에 + 버튼 생성
            ),
            ListTile(
              leading: Icon(Icons.settings,
                color : Colors.grey[800],
              ),
              title : Text("Setting"),
              onTap: (){
                print("Setting is cliked");
              },
              trailing: Icon(Icons.add),// 우측에 + 버튼 생성
            ),
            ListTile(
              leading: Icon(Icons.question_answer,
                color : Colors.grey[800],
              ),
              title : Text("Q&A"),
              onTap: (){
                print("Q&A is cliked");
              },
              trailing: Icon(Icons.add),// 우측에 + 버튼 생성
            ),
          ],
        ),   // 복수의 위젯을 세로로 나열해주며, 각 리스트 타일마다 배치가 필요.
      ),
    );
  }
}
```



### Dart에서 Null safety 관련 내용

- 요약 : 변수들은 절대로 null 값을 가질 수 없다. (컴파일 단계에서 null 값을 할당할 수 없게하여, 실행 안됨)

- null : 아직 값이 정해지지 않음.
- int age = null;   => age 값이 아직 정해지지 않았음.(안 넣을 수도 있음) => null safety 로 인하여 이제는 안됨.
- 타입 뒤에 "?" 를 추가하여 null 값이 올 수도 있음을 알려줌.
- 타입 앞에 "late"를 추가항여 나중에 정의될 것임을 알려줌.

```
class Person{
  String? name ;
  int? age;
  String? sex;
  
  Person({String? name, int? age, String? sex}){
        this.name = name ;
        this.age = age ;
        this.sex = sex ;
  }
}

void main(){
  Person p1 = new Person(age:30);
  Person p2 = new Person(sex : 'male');
  print(p1.age);
  print(p2.sex);
}
```

- 장고 - 플러터 공부
- 카메라 api 공부



## 회의

- 실제로 발표할 때 실시간으로 보여줄 수 없다면, 어떻게 준비해야 할 것인가?
- yolo 모델 구현을 AWS 상이 아닌, 로컬로 구동 예정.

## 이슈 

- 실제로 발표할 때 실시간으로 보여줄 수 없다면, 어떻게 준비해야 할 것인가?



# 2022년 03월 21일

- BuildContext : 위젯 트리에서 현재 위젯의 위치를 알 수 있는 정보
- 빌드함수는 스캐폴드 위젯을 리턴 하는데, 어디에 위치하는가에 대한 context 내용을 가져옴



### Snack Bar(플러터 2.0 메신저 사용) 및 Build Context

- 코드 정리 단축키 지정 : file -> setting -> keymap -> Reformat code with dartfmt 검색 후 단축키 지정:\

- 스낵바를 통하여 페이지 이동을 확인할 수 있다.

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title : "Snack Bar",
      theme : ThemeData(
        primarySwatch : Colors.red,
      ),
      home : MyPage(),
    );
  }
}

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar : AppBar(
        title : Text('Scaffold Messenger'),
        centerTitle: true,
      ),
      body : HomeBody(),
    );
  }
}

class HomeBody extends StatelessWidget {
  const HomeBody({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Center(
      child : ElevatedButton(
        child : Text("Go to the second page"),
        onPressed: (){
          Navigator.push(context, MaterialPageRoute(builder: (context)=>SecondPage()),
          );
        },
      ),
    );
  }
}

class SecondPage extends StatelessWidget {
  const SecondPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title : Text("Second Page"),
      ),
      body : Center(
        child : Text("\"좋아요\"가 추가되었습니다.",
        style : TextStyle(
          fontSize : 20.0,
          color : Colors.redAccent
        )),
      ),
    );
  }
}
```



- 스낵바를 호출하기 위해서 마이페이지의 플로팅 액션버튼 만들기
- 이를 통해, 이전 화면의 팝업을 유지시킨채로 화면을 이동할 수 있다.

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "Snack Bar",
      theme: ThemeData(
        primarySwatch: Colors.red,
      ),
      home: MyPage(),
    );
  }
}

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Scaffold Messenger'),
        centerTitle: true,
      ),
      body: HomeBody(),
      floatingActionButton: FloatingActionButton(
        child: Icon(Icons.thumb_up),
        onPressed: () {
          // ScaffoldMessenger : 가장 가까운 스캐포드 메신저를 찾아서 반환할 것.
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text("Like a new Snack bar!"),
              duration: Duration(seconds: 5),
            ),
          );
        },
      ),
    );
  }
}

class HomeBody extends StatelessWidget {
  const HomeBody({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Center(
      child: ElevatedButton(
        child: Text("Go to the second page"),
        onPressed: () {
          Navigator.push(
            context,
            MaterialPageRoute(builder: (context) => SecondPage()),
          );
        },
      ),
    );
  }
}

class SecondPage extends StatelessWidget {
  const SecondPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Second Page"),
      ),
      body: Center(
        child: Text("\"좋아요\"가 추가되었습니다.",
            style: TextStyle(fontSize: 20.0, color: Colors.redAccent)),
      ),
    );
  }
}
```



- 스택바 Action Widget -> Undo 버튼 및 뒤로 돌아가기

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "Snack Bar",
      theme: ThemeData(
        primarySwatch: Colors.red,
      ),
      home: MyPage(),
    );
  }
}

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Scaffold Messenger'),
        centerTitle: true,
      ),
      body: HomeBody(),
      floatingActionButton: FloatingActionButton(
        child: Icon(Icons.thumb_up),
        onPressed: () {
          // ScaffoldMessenger : 가장 가까운 스캐포드 메신저를 찾아서 반환할 것.
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text("Like a new Snack bar!"),
              duration: Duration(seconds: 5),
              // Undo 버튼을 통해 3번째 페이지로 이동
              action: SnackBarAction(
                label: 'Undo',
                onPressed: () {
                  Navigator.push(
                      context,
                      MaterialPageRoute(builder: (context) => ThirdPage()),
                  );
                },
              ),
            ),
          );
        },
      ),
    );
  }
}

class HomeBody extends StatelessWidget {
  const HomeBody({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Center(
      child: ElevatedButton(
        child: Text("Go to the second page"),
        onPressed: () {
          Navigator.push(
            context,
            MaterialPageRoute(builder: (context) => SecondPage()),
          );
        },
      ),
    );
  }
}

class SecondPage extends StatelessWidget {
  const SecondPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Second Page"),
      ),
      body: Center(
        child: Text("\"좋아요\"가 추가되었습니다.",
            style: TextStyle(fontSize: 20.0, color: Colors.redAccent)),
      ),
    );
  }
}

class ThirdPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Third Page"),
      ),
      body: Center(
        // Text 위젯을 컮럼으로 감싸기 위해, Text에 커서를 놓고, Alt+Enter 를 눌러 메뉴가 뜬다
        // 이후 Wrap with Column
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text("\"좋아요\"를 취소하시겠습니까?",
                style: TextStyle(fontSize: 20.0, color: Colors.redAccent)),
            ElevatedButton(
              onPressed: () {
                ScaffoldMessenger.of(context).showSnackBar(
                  SnackBar(
                      content: Text("\"좋아요\"가 취소되었습니다."),
                      duration : Duration(seconds: 3),
                  ),
                );
              },
              child: Text("취소하기"),
            ),
          ],
        ),
      ),
    );
  }
}

```



- 스낵바를 페이지를 이동하면서 바로 사라지게 하려면 별도의 스캐폴드메신저를 사용해야함.
- 리턴된 위젯은 ";" 세미콜론 으로 마감해야함.

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "Snack Bar",
      theme: ThemeData(
        primarySwatch: Colors.red,
      ),
      home: MyPage(),
    );
  }
}

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Scaffold Messenger'),
        centerTitle: true,
      ),
      body: HomeBody(),
      floatingActionButton: FloatingActionButton(
        child: Icon(Icons.thumb_up),
        onPressed: () {
          // ScaffoldMessenger : 가장 가까운 스캐포드 메신저를 찾아서 반환할 것.
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text("Like a new Snack bar!"),
              duration: Duration(seconds: 5),
              // Undo 버튼을 통해 3번째 페이지로 이동
              action: SnackBarAction(
                label: 'Undo',
                onPressed: () {
                  Navigator.push(
                      context,
                      MaterialPageRoute(builder: (context) => ThirdPage()),
                  );
                },
              ),
            ),
          );
        },
      ),
    );
  }
}

class HomeBody extends StatelessWidget {
  const HomeBody({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Center(
      child: ElevatedButton(
        child: Text("Go to the second page"),
        onPressed: () {
          Navigator.push(
            context,
            MaterialPageRoute(builder: (context) => SecondPage()),
          );
        },
      ),
    );
  }
}

class SecondPage extends StatelessWidget {
  const SecondPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Second Page"),
      ),
      body: Center(
        child: Text("\"좋아요\"가 추가되었습니다.",
            style: TextStyle(fontSize: 20.0, color: Colors.redAccent)),
      ),
    );
  }
}

class ThirdPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return ScaffoldMessenger(
      child: Scaffold(
        appBar: AppBar(
          title: Text("Third Page"),
        ),
        body: Builder(
          builder: (context) {
            return Center(
              // Text 위젯을 컮럼으로 감싸기 위해, Text에 커서를 놓고, Alt+Enter 를 눌러 메뉴가 뜬다
              // 이후 Wrap with Column
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  Text("\"좋아요\"를 취소하시겠습니까?",
                      style: TextStyle(
                          fontSize: 20.0, color: Colors.redAccent)),
                  ElevatedButton(
                    onPressed: () {
                      ScaffoldMessenger.of(context).showSnackBar(
                        SnackBar(
                          content: Text("\"좋아요\"가 취소되었습니다."),
                          duration: Duration(seconds: 3),
                        ),
                      );
                    },
                    child: Text("취소하기"),
                  ),
                ],
              ),
            );
          }
        ),
      ),
    );
  }
}
```



### 빌더 없이 snackbar 만들기

```dart
//빌더 없이 snackbar 만들기
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "Snack Bar",
      theme: ThemeData(
        primarySwatch: Colors.red,
      ),
      home: MyPage(),
    );
  }
}

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Snack Bar"),
        centerTitle: true,
      ),
      body: MySnackBar(),
    );
  }
}

class MySnackBar extends StatelessWidget {
  const MySnackBar({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Center(
      child: ElevatedButton(
        child: Text("Show me"),
        onPressed: () {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text("Show me",
              textAlign: TextAlign.center,
              style: TextStyle(
                color : Colors.white
                ),
              ),
              backgroundColor: Colors.teal,
              duration: Duration(milliseconds: 1000),
            ),
          );
          //   Navigator.push(
          //     context,
          //     MaterialPageRoute(builder: (context) => SecondPage()),
          //   );
        },
      ),
    );
  }
}

```



### Toast message 구현하기(null safety 미지원.. 다른 방법으로 구현필요)

```dart
// toast 만들기(
import 'package:flutter/material.dart';
//yaml 에   fluttertoast : ^3.1.3 를 pub get 한 이후 import 한다.
import 'package:fluttertoast/fluttertoast.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title : "Toast Message",
      theme: ThemeData(
        primarySwatch: Colors.red
      ),
      home: MyPage(),
    );
  }
}

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title : Text("Toast message"),
        centerTitle: true,
      ),
      // flutter 토스트 라이브러리는 등록 후 불러와야함.
      body : Center(
        child : ElevatedButton(
          child : Text("Toast"),
          onPressed: (){
            flutterToast();
          },
        ),
      ),
    );
  }
}

// toast 메세지를 실행할 void 타입으로 만들어줌.
void flutterToast(){
  Fluttertoast.showToast(msg: "Flutter!",
  gravity: ToastGravity.BOTTOM,
  backgroundColor: Colors.redAccent,
  fontSize: 20.0,
  textColor: Colors.white,
  toastLength: Toast.LENGTH_SHORT
  );
}
```



- 장고를 사용하면 sqlite 데이터 베이스를 얻음. 
- 장고 rest framework의 도움으로 rest api 를 구축
- 앱을 만든 뒤 서버나 백엔드와 연결
- 시리얼라이저 -> 장고 모델 데이터를 Json 타입으로 변경해주는 코드
- Json 타입으로 뿌려주면 api 로 통신이 되는 것. Json으로 바꿔주는 기계



## 회의

- 

## 이슈 

- UI 디자인 및 이동 페이지를 정해야함.

- 마스크 착용의 경우 실시간으로 화면을 보였으면 함, 자리 관련 내용은 로컬로 진행해야 함.





# 2022년 03월 22일

### Container Widget

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "containerWidget",
      theme: ThemeData(
        primarySwatch: Colors.red,
      ),
      home : MyPage(),
    );
  }
}

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.blue,
      // 컨테이너 위에 커서를 두고 Alt + Enter 를 누른 후 위젯 지정 -> SafeArea 선택
      body: SafeArea(
        child: Container(
          // 컨테이너는 하나의 child 만을 가진다.
          color : Colors.red,
          width : 100,
          height : 100,
          margin: EdgeInsets.symmetric(
            vertical : 50,  // 세로축
            horizontal: 10, // 가로축
          ),
          padding : EdgeInsets.all(40), // Text 가 컨테인어로 부터 20 씩 떨어져있음.
          // EdgeInsets.all(20), 상하좌우 20의 여백을 둔다.
          // 오른쪽, 아래등을 확인하려면 우측 flutter inspector 를 이용
          // margin : EdgeInsets.all(20),
          child: Text("Hello"),
          // 컨테이너는 child를 가지게 되면 그 크기대로 줄어듦.
        ),
      ),
    );
  }
}
```



### 컬럼, 로우 위젯  (중앙 맞추기)

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title : "Home",
      theme: ThemeData(
        primarySwatch: Colors.red,
      ),
      home: MyPage(),
    );
  }
}

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.teal,
      body: SafeArea(
        child: Center(
        // 가로 중앙
          child: Column(
            // mainAxisAlignment: MainAxisAlignment.center,  //세로 중앙
            mainAxisSize: MainAxisSize.min, // 세로 중앙(필수공간만)
            children: [
              Container(
                width: 100,
                height: 100,
                color: Colors.white,
                child : Text("Container 1"),
              ),
              Container(
                width: 100,
                height: 100,
                color: Colors.blue,
                child : Text("Container 2"),
              ),
              Container(
                width: 100,
                height: 100,
                color: Colors.red,
                child : Text("Container 3"),
              ),
            ], //[]는 위젯들의 리스트를 나열할 내용을 넣을 공간
          ),
        ),
      ),
    );
  }

```



### 정렬 순서 바꾸기(SizedBox 등...)

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title : "Home",
      theme: ThemeData(
        primarySwatch: Colors.red,
      ),
      home: MyPage(),
    );
  }
}

class MyPage extends StatelessWidget {
  const MyPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.teal,
      body: SafeArea(
        child: Row(
          crossAxisAlignment: CrossAxisAlignment.stretch, // 하위 컨테이너를 가로축 끝까지 채움.
          // crossAxisAlignment: CrossAxisAlignment.end, // 가로축 끝점 정렬
          // mainAxisAlignment: MainAxisAlignment.spaceBetween,  // 상중하 세로 정렬
          // mainAxisAlignment: MainAxisAlignment.spaceEvenly, // 같은 간격을 두고 세로 정렬
          // verticalDirection: VerticalDirection.up,  // 하단에서부터 세로 역순 정렬
          children: [
            Container(
              width: 100,
              height: 100,
              color: Colors.white,
              child : Text("Container 1"),
            ),
            SizedBox(
              // height: 30.0
              width : 30.0,
            ),
            Container(
              width: 100,
              height: 100,
              color: Colors.blue,
              child : Text("Container 2"),
            ),
            Container(
              width: 100,
              height: 100,
              color: Colors.red,
              child : Text("Container 3"),
            ),
            // Container(
            //   width: double.infinity, // 가로축 끝까지 확장
            //   height : 20,
            // ),
          ], //[]는 위젯들의 리스트를 나열할 내용을 넣을 공간
        ),
      ),
    );
  }
}

```



### Navigator (페이지 이동), Context

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "First",
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: FirstPage(),
    );
  }
}

class FirstPage extends StatelessWidget {
  const FirstPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context2) {
    return Scaffold(
      appBar: AppBar(title: Text("First Page")),
      body: Center(
        child: ElevatedButton(
          child: Text("Go to the second page"),
          onPressed: () {
            // 빌드 코딩
            Navigator.push(context2,
                // context 칸에 '_' 언더바가 있다면, 그 페이지는 사용하지 않음을 의미.
                // MaterialPageRoute(builder: (_) => SecondPage()));
                MaterialPageRoute(builder: (_) => SecondPage()));
            // 하드 코딩
            // Navigator.push(context2,
            //     MaterialPageRoute(builder: (BuildContext context) {
            //   return SecondPage();
            // }));
          },
          // route는 반드시 'MaterialApp' 내에서 child 로 생성 되어야 함.
        ),
      ),
    );
  }
}

class SecondPage extends StatelessWidget {
  const SecondPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext ctx) {
    return Scaffold(
      // appBar 구현시 뒤로가기가 자동으로 만들어진다. 없다면 pop 메서드를 사용해야함.
      appBar: AppBar(title: Text("Second Page")),
      body: Center(
        child: ElevatedButton(
          child: Text("Go to the first page"),
          onPressed: () {
            Navigator.pop(ctx);
          },
        ),
      ),
    );
  }
}

```

- MyApp 위젯 내에 메테리얼 앱 위젯이 빌드, 차일드 위젯으로 퍼스트 페이지 위젯을 호출하고 있음.
- 세컨드페이지 위젯이 호출된다는 것은 첫번째 페이지가 사라지는 것이 아닌 그 위에 놓이는 것을 의미.

- Route 의 개념 : 스마트폰 상에서 보이는 하나의 페이지

  ```
  route는 반드시 'MaterialApp' 내에서 child 로 생성 되어야 함.
  ```

- Navigator의 정의와  push, pop 함수, stack 자료 구조

  - Navigator 는 stack이라는 자료구조 형식으로 모든 route(앱페이지)를 관리하며, push, pop 메서드를 제공

- MaterialPageRoute 위젯과 context

- 페이지 이동 기능 구현



### 네비게이터 푸시네임드 메서드, 멀티페이지 이동

- ElevatedButton 설정
- main.dart

```
// dart 파일에서는 항상 flutter/material.dart 를 임포트 해야한다.
// 다른 dart 파일을 사용하려면 역시 import 해야함.
import 'package:flutter/material.dart';
import 'package:navigator220322_2/ScreenA.dart';
import 'package:navigator220322_2/ScreenB.dart';
import 'package:navigator220322_2/ScreenC.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      initialRoute : '/',
      // 맵자료를 나열할 때에는 중괄호{}를 사용한다.
      routes: {
        '/' : (context) => ScreenA(),
        '/b' : (context) => ScreenB(),
        '/c' : (context) => ScreenC(),
      },
    );
  }
}
```

- ScreenA.dart

```
import 'package:flutter/material.dart';

class ScreenA extends StatelessWidget {
  const ScreenA({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text("ScreenA")),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,  // 세로 중앙
          children: [
            ElevatedButton(
              onPressed: () {
                Navigator.pushNamed(context, '/b'); // 함수이므로 세미콜론으로 마무리
                print("Elevated button");
              },
              child: Text("Go to ScreenB"),
              style: ElevatedButton.styleFrom(
                primary: Colors.red,
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(10.0) // 모서리를 둥글게
                ),
                elevation:0.0 // 음영효과 지우기
              ),
            ),
            SizedBox(height: 30.0),
            ElevatedButton(
              onPressed: () {
                Navigator.pushNamed(context, '/c'); // 함수이므로 세미콜론으로 마무리
                print("Elevated button");
              },
              child: Text("Go to ScreenC"),
              style: ElevatedButton.styleFrom(
                  primary: Colors.red,
                  shape: RoundedRectangleBorder(
                      borderRadius: BorderRadius.circular(10.0) // 모서리를 둥글게
                  ),
                  elevation:0.0 // 음영효과 지우기
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

- ScreenB.dart

```
import 'package:flutter/material.dart';

class ScreenB extends StatelessWidget {
  const ScreenB({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text("ScreenB")),
      body: Center(
        child: Text(
          "ScreenB",
          style: TextStyle(fontSize: 24.0),
        ),
      ),
    );
  }
}
```

- ScreenC.dart

```
import 'package:flutter/material.dart';

class ScreenC extends StatelessWidget {
  const ScreenC({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text("ScreenC")),
      body: Center(
        child: Text(
          "ScreenC",
          style: TextStyle(fontSize: 24.0),
        ),
      ),
    );
  }
}
```





## 회의

- 입구에서 yolo로 고객을 인식할 때 사람 라인을 그릴 수 있는가?

## 이슈 

- 수요일 train, test 데이터 모임 준비



# 2022년 03월 23일

- yolo 마스크 관련 자료를 데이터 train, data 셋 만들기
- 플러터 디자인 UI 결정 및 앱 구현 논의
- 멘토분들에게 질문 사항 논의



# 2022년 03월 24일

### Collection and Generic

```
// Dartpad

void main(){
  String name = 'Sean';
  print(name);
  
  print("Hi, $name, what'up?");
}
-----------------------console--------------------
Sean
Hi, Sean, what'up?
```

-  Collection : 데이터들을 모아서 가지고 있는 자료구조
- Generic : Collection 이 가지고 있는 데이터들의 데이터 타입을 지정
- fixed-length list : 리스트 내의 자료가 제한된 개수만 올 수 있음
- growable list : 제한이 없음

```
int addNumber(int num1, int num2){
  return num1+num2;
}

void main(){
 List<dynamic> number = new List.empty(growable:true);
  
  number.add(2);
  number.add('test');
  number.add(7.4);
  number.add(addNumber(3,4));
  number.add(true);
  print(number);
}


[2, test, 7.4, 7, true]

```

```
void main(){
  List<String> names = List.empty(growable:true);
  names.addAll(['James','John','Tom']);
  print(names);
}
```

- 모든 위젯은 Material App 위젯 내에 존재해야 한다.



### Store Management 7 페이지 디자인 제작 (검흰)

- main.dart

```dart
import 'package:flutter/material.dart';
import 'package:page2/page2.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      initialRoute : '/',
      routes: {
        "/" : (context) => page2(),
      },
    );
  }
}
```

- camera.dart(아직 제작안함)

- page2.dart

```dart
import 'package:flutter/material.dart';

class page2 extends StatelessWidget {
  const page2({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("Store Management 7", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      drawer: Drawer(
        child: ListView(
          padding: EdgeInsets.zero,
          children: [
            UserAccountsDrawerHeader(
              accountName: Text("강남2호점"),
              accountEmail: Text("강남2호점@ediya.com"),
              decoration: BoxDecoration(color: Colors.black),
            ),
          ],
        ),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            ElevatedButton.icon(
              icon: Icon(Icons.door_sliding_outlined,
                  size: 50.0, color: Colors.white),
              label: Text(" 출입   마스크   확인", style: TextStyle(fontSize: 25.0)),
              style: ElevatedButton.styleFrom(
                  primary: Colors.black,
                  minimumSize: Size(250, 80),
                  elevation: 0.0),
              onPressed: () {
                print("1번 버튼 작동 확인");
              },
            ),
            SizedBox(height: 75.0),
            ElevatedButton.icon(
              icon: Icon(Icons.masks, size: 50.0, color: Colors.white),
              label: Text(" 좌석 & 마스크 확인", style: TextStyle(fontSize: 25.0)),
              style: ElevatedButton.styleFrom(
                  primary: Colors.black,
                  minimumSize: Size(250, 80),
                  elevation: 0.0),
              onPressed: () {
                Navigator.push(
                    context, MaterialPageRoute(builder: (context) => page3()));
              },
            ),
          ],
        ),
      ),
    );
  }
}



class page3 extends StatelessWidget {
  const page3({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("마스크 & 자리 화면", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            ElevatedButton(onPressed: () {
              Navigator.pop(context);
            },
                child: Text("메인화면으로 돌아가기", style: TextStyle(fontSize: 15.0)),
              style: ElevatedButton.styleFrom(
                primary: Colors.black,
                elevation: 0.0,
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

- 로그인 페이지는 용현님이 구현 완료
- 출입 마스크 확인 버튼은 아직 제작하지 않음(다른 팀원이 구현예정)
- 좌석&마스크 확인 페이지 push&pop 버튼으로 페이지 이동까지는 구현
- 카메라의 데이터에 따라 테이블, 의자의 디자인 및 reaction 코드 고민해봐야함.





## 개발

- 결정된 페이지 디자인 대로 제작 진행중

## 회의

- 발표 준비





# 2022년 03월 25일

### Stateful 위젯

- State 는 UI 가 변경되도록 영향을 미치는 데이터이다.
- App 수준과 Widget 수준의 데이터가 있음.
- 앱의 상태를 바꾸는 모든 행위를 말함.
- Stateless widget
  - State 가 변하지 않는 위젯을 말함.
  - 한번 지정된 레이아웃, 색 정보등은 변하지 않음.
  - 새로운 스테이트를 적용하려면 리빌드하는 방법밖에 없음.
- Widget tree : 
- Element tree : 위젯트리와 렌더 트리와 연결, 여타 위젯들 처럼 메모리에 등록되어 플러터에 의해 운영됨.
- Render tree : 화면에 그림을 그려주는 역할(눈에 보이는 역할)
- 상속 : 모든 속성과 기능을 받아 올 수 있다. 객체지향언어에서 자원을 절약할 수 있다.
- @override : 다른 클래스의 함수를 가져와서 사용할 수 있게 한다.
- input Data(external) => stateful and stateless widget => Build method => Renders UI





## 개발

- Stateful 위젯을 통해 Seat_status 페이지 구현 관련 공부
- yolo 데이터셋 사진 전처리 시작(인당 800장 정도)







# 2022년 03월 26일



- 마스크 관련 프로젝트 => 현재로서는 공격당하기 좋은 주제임. 한계가 보이며, 일단 하는 것이 중요

- yolo 와 플러터를 연결하는 방법?

- 시간이 얼마 안남았음.

- 사람을 카운팅한 오브젝트 값

- 캔버스를 그려 렌더링하는 것이 쉬움.

- canvas draw image(플러터)

- 이미지 라벨링 범위 수정 필요

- API 표현에 대해 수정이 필요

- YOLO 이미지 전처리 라벨에 대한 명확한 구분이 필요

  

-----------오후----------------

- 로젝트에 관한 전체적인 자료를 하나로 통합하여 정리해야함.

- 스토리보드 (샘플) 을 받을 수 있을지

- 구체적인 수치를 기록해야 함.

- 발표에 대하여 데이터 전처리에 관한 정보가 누락되어 있음.

- 실시간 처리에 대한 표현 수정이 필요.

- 앱 다이아그램을 통해 flow(흐름도)를 그려볼 것.

- kafka, redis
- YOLO는 웹 소켓으로 연결해야함.





# 2022년 03월 28일

- 메뉴 페이지 -> 용현님이 만든 로그인 화면과 페이지 합치기 완료
- Seat_status 화면 제작 진행

- AWS 케이스 동영상 모델화한 탐지 -> 결과 ->redis DB 사용 계속 저장 ->웹소켓(queue)으로 -> 결과


- 출입관리(2 tier)
   - 마스크 tflite + 카메라 내장 카메라
   - (시간이된다면) 알림 울리기까지 진행
   - **사이언스 요청 : 마스크 tflite 파일**
- 실내관리(3 tier)
   - 주피터(욜로+전처리) -> RedisDB -> 웹소켓 -> Flutter
   - 확인해야할 것들
      - 웹소켓 공부
	  - RedisDB(NoSQL) 공부
	  - 웹소켓을 통해 Flutter로 받는 예제 확인
   - **사이언스 요청 : 모델에 대한 결과**



- 웹소켓 
  - 기존 http 를 통해 서버에서 정보를 가져왔으나,  단점은 서버에서 클라이언트로 데이터를 줄 때에는 반드시 클라이언트 요청이 있어야함. (요청이 없으면 줄 수 없음)
  - 서버와 클라이언트 간의 양방향 통신.
- 장고-플라스크 대신 FastAPI(비동기 처리 프레임워크) 를 사용할 수 있음
- Redis : 데이터 베이스는 컴퓨터가 꺼지더라고 데이터를 저장하여야 하므로,  
- 주피터 -> 레디스 -> 장고채널(웹소켓) -> 플러터





## 개발



## 회의



## 이슈 







# 2022년 03월 29일



## 개발

- 테이블을 Json 형태의 데이터를 받았을 때, 색상 변화 구현중



## 이슈 

- 마스크 착용 유무 위치, 빈자리 위치 구분 하는 문제가 발생.

{
	position : 0	(0 : 첫번재 자리, 1 : 두번재 자리, 2 : 세번재 자리)
	table : 0	(0 : 빈자리, 1 : 찬자리)
	object : 0	(0 : 노트북, 1 : 커피잔, 2 : 가방, 3 : 책)

​	chair : 0	(0 : 테이블 위 자리, 1 : 테이블 아래 자리)
​	person : 0	(0 : 의자에 사람이 없다, 1 : 있다)
​	mask : 0	(0 : 마스크 미착용, 1 : 마스크 착용, 2 : 에러)

​	time : 0000.00.00, 00:00:00
}

빈자리 : object =0 & person = 0



- **JSON 변수를 어떻게 정할것인가 매우중요**

- 추가 발급된 AWS : http://35.78.56.195:8900/
- epoch : 데이터를 반복학습한 횟수.

- 아직 확정은 아닌 변수

{
                'position': randint(0, 3), 
                'object': [1, 3, 2, 1], # 노트북, 컵, 가방, 책도 감지하나요? 
                'chair': {"위":[0, 1, 2, 3], "아래":[0, 1, 2, 3]},
                // 'person': randint(0, 2), 
                // 'mask': randint(0, 3),
                'time': datetime.now().strftime('%Y-%m-%d %H:%M:%S')
                }

- dart 생성자, 클래스 생성자

```
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/utilities/constants(login).dart';

class EmptyCheck extends StatefulWidget {
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

final jsonString = {"position": 1,"table":1,"person":1,"mask":1};

class myPainter extends CustomPainter
{
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas,Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(100,100) & const Size(200, 100), paint);
  }

  void _table(Canvas canvas,Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-100,0) & const Size(200, 70), paint);
  }

  void _noperson(Canvas canvas,Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(size.width.toInt() / 2, size.width.toInt() / 2), 20, paint);
  }

  void _person_mask(Canvas canvas,Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(size.width.toInt() / 2, size.width.toInt() / 2), 20, paint);
  }

  void _person_nomask(Canvas canvas,Size size) {
    Paint paint = Paint()
      ..color = Colors.red
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(size.width.toInt() / 2, size.width.toInt() / 2), 20, paint);
  }

  @override
  void paint(Canvas canvas, Size size) {
    if(target == "p1"){
      _person_mask(canvas, size);
    }else if(target == "t1"){
      _table(canvas, size);
    }else if(target == "p2"){
      _person_nomask(canvas, size);
    }

    // _emptytable(canvas,size);
    // _table(canvas, size);
    // _noperson(canvas, size);
    // _person_nomask(canvas, size);
    // _person_mask(canvas, size);

    // if (jsonString[0] == 0) {
    //   if (jsonString[1] == 0) { //0번테이블, 빈자리
    //     _emptytable(canvas, size);
    //     _noperson(canvas, size);
    //   } else { //0번테이블, 자리있음
    //     if (jsonString[3] == 1 && jsonString[4] == 0) { //0번테이블 사람있음, 마스크 안꼈음
    //       _table(canvas, size);
    //       _person_nomask(canvas, size);
    //     } else
    //     if (jsonString[3] == 1 && jsonString[4] == 1) { //0번테이블 사람있음, 마스크 안꼈음
    //       _table(canvas, size);
    //       _person_mask(canvas, size);
    //     }
    //   }


    // if (jsonString[0] == 0) {
    //   if (jsonString[1] == 0) { //0번테이블, 빈자리
    //     _emptytable(canvas, size);
    //     _noperson(canvas, size);
    //   } else { //0번테이블, 자리있음
    //     if (jsonString[3] == 1 && jsonString[4] == 0) { //0번테이블 사람있음, 마스크 안꼈음
    //       _table(canvas, size);
    //       _person_nomask(canvas, size);
    //     } else
    //     if (jsonString[3] == 1 && jsonString[4] == 1) { //0번테이블 사람있음, 마스크 안꼈음
    //       _table(canvas, size);
    //       _person_mask(canvas, size);
    //     }
    //   }
    // } else if(jsonString[0] == 1){ //1번테이블, 빈자리
    //   if (jsonString[1] == 0) { //1번테이블, 빈자리
    //     _emptytable(canvas, size);
    //     _noperson(canvas, size);
    //   } else { //1번테이블, 자리있음
    //     if (jsonString[3] == 1 && jsonString[4] == 0) { //1번테이블 사람있음, 마스크 안꼈음
    //       _table(canvas, size);
    //       _person_nomask(canvas, size);
    //     } else
    //     if (jsonString[3] == 1 && jsonString[4] == 1) { //1번테이블 사람있음, 마스크 안꼈음
    //       _table(canvas, size);
    //       _person_mask(canvas, size);
    //     }
    //   }
    // }else{
    //   if (jsonString[1] == 0) { //2번테이블, 빈자리
    //     _emptytable(canvas, size);
    //     _noperson(canvas, size);
    //   } else { //2번테이블, 자리있음
    //     if (jsonString[3] == 1 && jsonString[4] == 0) { //2번테이블 사람있음, 마스크 안꼈음
    //       _table(canvas, size);
    //       _person_nomask(canvas, size);
    //     } else
    //     if (jsonString[3] == 1 && jsonString[4] == 1) { //2번테이블 사람있음, 마스크 안꼈음
    //       _table(canvas, size);
    //       _person_mask(canvas, size);
    //     }
    //   }
    // }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              Center(
                  child: Column(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: <Widget>[
                        Container(
                          height:50,
                          width:100,
                          alignment: Alignment.centerLeft,
                          child:CustomPaint(
                            painter: myPainter("p1"),
                          ),
                        ),
                        SizedBox(
                          height: 10,
                        ),
                        Container(
                          height:0,
                          width:0,
                          child:CustomPaint(
                            painter: myPainter("t1"),
                          ),
                        ),
                        SizedBox(
                          height: 70,
                        ),
                        Container(
                          height:70,
                          width:100,
                          alignment: Alignment.centerRight,
                          child:CustomPaint(
                            painter: myPainter("p2"),
                          ),
                        ),
                        // SizedBox(
                        //   height: 50,
                        // ),
                        // Container(
                        //   height:100,
                        //   width:150,
                        //   child:CustomPaint(
                        //     painter: myPainter("p1"),
                        //   ),
                        // ),
                        // SizedBox(
                        //   height: 20,
                        // ),
                        // Container(
                        //   height:150,
                        //   width:150,
                        //   child:CustomPaint(
                        //     painter: myPainter("t1"),
                        //   ),
                        // ),
                        // SizedBox(
                        //   height: 20,
                        // ),
                        // Container(
                        //   height:10,
                        //   width:150,
                        //   child:CustomPaint(
                        //     painter: myPainter("p2"),
                        //   ),
                        // ),
                        // SizedBox(
                        //   height: 50,
                        // ),
                        // Container(
                        //   height:10,
                        //   width:150,
                        //   child:CustomPaint(
                        //     painter: myPainter("p1"),
                        //   ),
                        // ),
                        // SizedBox(
                        //   height: 20,
                        // ),
                        // Container(
                        //   height:100,
                        //   width:150,
                        //   child:CustomPaint(
                        //     painter: myPainter("t1"),
                        //   ),
                        // ),
                        // SizedBox(
                        //   height: 20,
                        // ),
                        // Container(
                        //   height:10,
                        //   width:150,
                        //   child:CustomPaint(
                        //     painter: myPainter("p2"),
                        //   ),
                        // ),
                      ]))
            ],
          ),
        ),
      ),
    );
  }
}
```

- The method '[]' can't be unconditionally invoked because the receiver can be 'null'
- dart 연습

```dart
// final Map jsonString = {
//   "position": 1,
//   "object":[1,2,3,1],
//   "chair":{
//     "up":[0,1,2,3],
//     "down":[0,1,2,3]
//   }
// };
// &&(and), ||(or)
// final, const 공통점 : var 키워드 생략가능, 차이점 : const는 build 타임을 알아야함
// final : 변수의 값을 변경할 수 없다.
// const : 역시 변경할 수 없지만, 차이점 : var 키워드 생략 가능
void main() {
  final jsonString1 = {
    'position': 1,
    'object': 2,
    'chair': [0, 1],
  };

  print(jsonString1.runtimeType);
  print(jsonString1.keys.toList());
  print(jsonString1.keys);
  print(jsonString1.values.toList());
  print(jsonString1.values);
  print(jsonString1["object"]);

  List<String> alpha = ['가', '나', '다', '라'];
  print(alpha[0]);
  print(alpha.length);
  print("---------------------------------------------");
  // yolo에서 redis로 저장할 때, json 형식으로 저장한다고 하면
  // 어떻게 보낼 것인지, 예시 형식을 받아야 할 것 같음.
  // Map<키, 값>
  Map<String, dynamic> jsonString2 = {
    'position': 1,
    'object': 2,
    'chair1': 1,
    'chair2': [2, 3]
  };
  print(jsonString2["chairDown"]);
  print("---------------------------------------------");

  if (jsonString2["position"] == 1) {
    if (jsonString2["chair1"] == 2) {
      print("조건문 출력 : OK");
    } else {
      print("조건문 출력 : Error");
    }
  }

  print("---------------------------------------------");

//   List<String> position2 = ['123','1234'];

//   final? name = '123';
//   print(name);
//   name = null;
//   print(name);

  // var item = jsonString1.firstWhere((item) => item['position'] == 1);
  print("---------------------------------------------");

  // Map
  // Key / Value
  Map<String, String> beta = {
    'position': '1',
    'object': '2',
    'chair': '3',
  };

  print(beta);

  print("---------------------------------------------");
  //Set 은 Map 과 비슷하지만 중복을 자동적으로 삭제해줌.
  final Set<String> name = {
    '1',
    '2',
    '3',
    '2',
  };
  print(name);
  print("---------------------------------------------");
  // If 문
  int number = 3;
  //if(조건){};
  if (number % 3 == 0) {
    print('나머지가 0입니다');
  } else if (number % 3 == 1) {
    print('나머지가 1입니다');
  } else {
    print('나머지가 2입니다');
  }
}

```

ㅇ

# 2022년 03월 30일

- Dart 언어 연습
- redis 에서 django channel 을 거쳐 플러터로 데이터를 받을 때, table1,2,3 이 한번에 오는지 확인
- table1,2,3 이 들어온 뒤, 다음 데이터가 들어올 때 기존 데이터 삭제여부
- paint 를 그리는 if 문에서 paint 가 이미 정의되어 있어, if 문을 따로 분리가 안됨...(dart 공부 필요)
- 테이블, 의자 모양은 구현 되었으나, 색 변환 관련하여 확인 필요.

```dart
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/utilities/constants(login).dart';

class EmptyCheck extends StatefulWidget {
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

final Map<String, dynamic> jsonString2 = {
  // 10시 (1시간)
  // 11시
  'table1': {
    //테이블3
    'chair': {
      'up': 2, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 1
    },
    'object': {
      "notebook": 1, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 2, //가방 갯수
      "cup": 2 // 컵 갯수
    }
  },
  'table2': {
    //테이블3
    'chair': {
      'up': 2, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 1
    },
    'object': {
      "notebook": 1, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 2, //가방 갯수
      "cup": 2 // 컵 갯수
    }
  },
  'table3': {
    //테이블3
    'chair': {
      'up': 2, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 1
    },
    'object': {
      "notebook": 1, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 2, //가방 갯수
      "cup": 2 // 컵 갯수
    }
  }
};
//바뀐거로

class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _noperson(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_mask(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_nomask(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.red
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  // final Map<String, dynamic> jsonString2 = {
  //   'table3': {
  //     'chair': {'up': 2, 'down': 1},
  //     'object': {
  //       "notebook": 1, //노트북 갯수
  //       "book": 0, //책 갯수
  //       "bag": 2, //가방 갯수
  //       "cup": 2 // 컵 갯수
  //     }
  //   }
  // };

  @override
  void paint(Canvas canvas, Size size) {
    if (target == "p1" &&
        jsonString2.keys.first.toString() == "table1" &&
        jsonString2["table1"]["chair"].keys.first.toString() == "up") {
      if (jsonString2["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        jsonString2.keys.first.toString() == "table1" &&
        jsonString2["table1"]["chair"].keys.first.toString() == "down") {
      if (jsonString2["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }}
      void paint(Canvas canvas, Size size) {
        if (target == "p3" &&
            jsonString2.keys.first.toString() == "table2" &&
            jsonString2["table2"]["chair"].keys.first.toString() == "up") {
          if (jsonString2["table2"]["chair"]["up"] == 0) {
            _noperson(canvas, size);
          } else if (jsonString2["table2"]["chair"]["up"] == 1) {
            _person_mask(canvas, size);
          } else if (jsonString2["table2"]["chair"]["up"] == 2) {
            _person_nomask(canvas, size);
          } else {
            _person_nomask(canvas, size);
          }
        } else if (target == "p4" &&
            jsonString2.keys.first.toString() == "table2" &&
            jsonString2["table2"]["chair"].keys.first.toString() == "down") {
          if (jsonString2["table2"]["chair"]["down"] == 0) {
            _noperson(canvas, size);
          } else if (jsonString2["table2"]["chair"]["down"] == 1) {
            _person_mask(canvas, size);
          } else if (jsonString2["table2"]["chair"]["down"] == 2) {
            _person_nomask(canvas, size);
          } else {
            _person_nomask(canvas, size);
          }
        }}
        void paint(Canvas canvas, Size size) {
          if (target == "p5" &&
              jsonString2.keys.first.toString() == "table3" &&
              jsonString2["table3"]["chair"].keys.first.toString() == "up") {
            if (jsonString2["table3"]["chair"]["up"] == 0) {
              _noperson(canvas, size);
            } else if (jsonString2["table3"]["chair"]["up"] == 1) {
              _person_mask(canvas, size);
            } else if (jsonString2["table3"]["chair"]["up"] == 2) {
              _person_nomask(canvas, size);
            } else {
              _person_nomask(canvas, size);
            }
          } else if (target == "p6" &&
              jsonString2.keys.first.toString() == "table3" &&
              jsonString2["table3"]["chair"].keys.last.toString() == "down") {
            if (jsonString2["table3"]["chair"]["down"] == 0) {
              _noperson(canvas, size);
            } else if (jsonString2["table3"]["chair"]["down"] == 1) {
              _person_mask(canvas, size);
            } else if (jsonString2["table3"]["chair"]["down"] == 2) {
              _person_nomask(canvas, size);
            } else {
              _person_nomask(canvas, size);
            }
          } else if (target == "t1") {
            _table(canvas, size);
          } else if (target == "t2") {
            _emptytable(canvas, size);
          } else if (target == "t3") {
            _table(canvas, size);
          }
        }
      }
    }


  @override
  void tableCheck() {}

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              SafeArea(
                child: Center(
                    child: Column(
                        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                        children: <Widget>[
                      SizedBox(
                        height: 80,
                      ),
                      Container(
                        // alignment: Alignment.center,
                        child: CustomPaint(
                          painter: myPainter("p1"),
                        ),
                      ),
                      SizedBox(
                        height: 50,
                      ),
                      Container(
                        // alignment: Alignment.center,
                        child: CustomPaint(
                          painter: myPainter("t1"),
                        ),
                      ),
                      SizedBox(
                        height: 50,
                      ),
                      Container(
                        // alignment: Alignment.center,
                        child: CustomPaint(
                          painter: myPainter("p2"),
                        ),
                      ),
                      SizedBox(
                        height: 70,
                      ),
                      Container(
                        // alignment: Alignment.center,
                        child: CustomPaint(
                          painter: myPainter("p3"),
                        ),
                      ),
                      SizedBox(
                        height: 50,
                      ),
                      Container(
                        // alignment: Alignment.center,
                        child: CustomPaint(
                          painter: myPainter("t2"),
                        ),
                      ),
                      SizedBox(
                        height: 50,
                      ),
                      Container(
                        // alignment: Alignment.center,
                        child: CustomPaint(
                          painter: myPainter("p4"),
                        ),
                      ),
                      SizedBox(
                        height: 70,
                      ),
                      Container(
                        // alignment: Alignment.center,
                        child: CustomPaint(
                          painter: myPainter("p5"),
                        ),
                      ),
                      SizedBox(
                        height: 50,
                      ),
                      Container(
                        // alignment: Alignment.center,
                        child: CustomPaint(
                          painter: myPainter("t3"),
                        ),
                      ),
                      SizedBox(
                        height: 50,
                      ),
                      Container(
                        // alignment: Alignment.center,
                        child: CustomPaint(
                          painter: myPainter("p6"),
                        ),
                      ),
                      SizedBox(
                        height: 80,
                      ),
                    ])),
              )
            ],
          ),
        ),
      ),
    );
  }
}

```



## 회의

- 마스크 & 좌석 확인 페이지 오류 -> 수정진행중



## 이슈 

- 마스크 인식 개선중
- redis 에서 웹소켓 통신 중 오류 발생







# 2022년 03월 31일

- 자리 조건문 수정 완료
- 테이블 조건문 수정 진행중
- 안드로이드 핫리로드 오류 발생 -> 수정 후 크롬웹으로 확인 진행

## 개발

```dart
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/utilities/constants(login).dart';

class EmptyCheck extends StatefulWidget {
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

final Map<String, dynamic> jsonString2 = {
  'table1': {
    //테이블1
    'chair': {
      'up': 0, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 1
    },
    'object': {
      "notebook": 0, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 0, //가방 갯수
      "cup": 0 // 컵 갯수
    }
  },
  'table2': {
    //테이블2
    'chair': {
      'up': 0, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 0
    },
    'object': {
      "notebook": 2, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 0, //가방 갯수
      "cup": 0 // 컵 갯수
    }
  },
  'table3': {
    //테이블3
    'chair': {
      'up': 1, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 3
    },
    'object': {
      "notebook": 1, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 2, //가방 갯수
      "cup": 2 // 컵 갯수
    }
  }
};
//바뀐거로

class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _noperson(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_mask(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_nomask(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.red
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        jsonString2["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (jsonString2["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        jsonString2["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (jsonString2["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        jsonString2["table2"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        jsonString2["table2"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        jsonString2["table3"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        jsonString2["table3"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table1(Canvas canvas, Size size) {
    if (target == 't1' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table1"]['object']['notebook'] == 0) &&
          (jsonString2["table1"]['object']['book'] == 0) &&
          (jsonString2["table1"]['object']['bag'] == 0) &&
          (jsonString2["table1"]['object']['cup'] == 0) &&
          (jsonString2["table1"]['chair']['up'] == 0) &&
          (jsonString2["table1"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table2(Canvas canvas, Size size) {
    if (target == 't2' && jsonString2["table2"].keys.elementAt(1) == "object") {
      if ((jsonString2["table2"]['object']['notebook'] == 0) &&
      (jsonString2["table2"]['object']['book'] == 0) &&
      (jsonString2["table2"]['object']['bag'] == 0) &&
      (jsonString2["table2"]['object']['cup'] == 0) &&
      (jsonString2["table2"]['chair']['up'] == 0) &&
      (jsonString2["table2"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table3(Canvas canvas, Size size) {
    if (target == 't3' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table3"]['object']['notebook'] == 0) &&
      (jsonString2["table3"]['object']['book'] == 0) &&
      (jsonString2["table3"]['object']['bag'] == 0) &&
      (jsonString2["table3"]['object']['cup'] == 0) &&
      (jsonString2["table3"]['chair']['up'] == 0) &&
      (jsonString2["table3"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      if (jsonString2.keys.elementAt(i) == "table1") {
        //table1일경우
        table1_person(canvas, size);
        table1(canvas, size);
      } else if (jsonString2.keys.elementAt(i) == "table2") {
        //table2일경우만
        table2_person(canvas, size);
        table2(canvas, size);
      } else {
        table3_person(canvas, size);
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              SafeArea(
                child: Center(
                    child: Column(
                        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                        children: <Widget>[
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p2"),
                            ),
                          ),
                          SizedBox(
                            height: 70,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t2"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p4"),
                            ),
                          ),
                          SizedBox(
                            height: 70,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p5"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p6"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                        ])),
              )
            ],
          ),
        ),
      ),
    );
  }
}

```



## 회의

- 마스크 유무 기존 디자인을 마스크 아이콘 혹은 디자인 수정해볼 것  ( 예시 : 😷😀)

## 이슈 

- 플러터 내에서 내부 카메라를 실행시키는 코드에서 에러 발생.

```
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/utilities/constants(login).dart';

class EmptyCheck extends StatefulWidget {
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

final Map<String, dynamic> jsonString2 = {
  'table1': {
    //테이블1
    'chair': {
      'up': 0, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 1
    },
    'object': {
      "notebook": 0, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 0, //가방 갯수
      "cup": 0 // 컵 갯수
    }
  },
  'table2': {
    //테이블2
    'chair': {
      'up': 0, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 0
    },
    'object': {
      "notebook": 2, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 0, //가방 갯수
      "cup": 0 // 컵 갯수
    }
  },
  'table3': {
    //테이블3
    'chair': {
      'up': 1, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 3
    },
    'object': {
      "notebook": 1, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 2, //가방 갯수
      "cup": 2 // 컵 갯수
    }
  }
};
//바뀐거로

class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _noperson(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_mask(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_nomask(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.red
      ..style = PaintingStyle.fill;
    canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        jsonString2["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (jsonString2["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        jsonString2["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (jsonString2["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        jsonString2["table2"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        jsonString2["table2"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        jsonString2["table3"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        jsonString2["table3"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table1(Canvas canvas, Size size) {
    if (target == 't1' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table1"]['object']['notebook'] == 0) &&
          (jsonString2["table1"]['object']['book'] == 0) &&
          (jsonString2["table1"]['object']['bag'] == 0) &&
          (jsonString2["table1"]['object']['cup'] == 0) &&
          (jsonString2["table1"]['chair']['up'] == 0) &&
          (jsonString2["table1"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table2(Canvas canvas, Size size) {
    if (target == 't2' && jsonString2["table2"].keys.elementAt(1) == "object") {
      if ((jsonString2["table2"]['object']['notebook'] == 0) &&
      (jsonString2["table2"]['object']['book'] == 0) &&
      (jsonString2["table2"]['object']['bag'] == 0) &&
      (jsonString2["table2"]['object']['cup'] == 0) &&
      (jsonString2["table2"]['chair']['up'] == 0) &&
      (jsonString2["table2"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table3(Canvas canvas, Size size) {
    if (target == 't3' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table3"]['object']['notebook'] == 0) &&
      (jsonString2["table3"]['object']['book'] == 0) &&
      (jsonString2["table3"]['object']['bag'] == 0) &&
      (jsonString2["table3"]['object']['cup'] == 0) &&
      (jsonString2["table3"]['chair']['up'] == 0) &&
      (jsonString2["table3"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      if (jsonString2.keys.elementAt(i) == "table1") {
        //table1일경우
        table1_person(canvas, size);
        table1(canvas, size);
      } else if (jsonString2.keys.elementAt(i) == "table2") {
        //table2일경우만
        table2_person(canvas, size);
        table2(canvas, size);
      } else {
        table3_person(canvas, size);
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              SafeArea(
                child: Center(
                    child: Column(
                        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                        children: <Widget>[
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p2"),
                            ),
                          ),
                          SizedBox(
                            height: 70,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t2"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p4"),
                            ),
                          ),
                          SizedBox(
                            height: 70,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p5"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p6"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                        ])),
              )
            ],
          ),
        ),
      ),
    );
  }
}

```





# 2022년 04월 04일



## 개발

- Mask, NoMask, EmptySeat 을 표현하는 디자인 변경하기
  - Custompainter 위젯을 통해 asset 이미지 불러오기 (불가능)
    - Custompainter 로는 그리기만 가능, 이미지를 불러오려면 다른 위젯을 사용해야하며 그럴 경우 기존 방법을 전부 수정해야 함
  - Custompainter 위젯을 통해 마스크 및 노마스크, 빈자리를 직접 그려보기
    - 공부를 해본 결과 그리는 방법을 익히고 현재 디자인처럼 적용하려면 많은 시간이 소모됨.
  - Custompainter 내에서 아이콘을 불러오기 (성공)
    - 기존 UI 와도 크게 이질감이 느껴지지 않음.

```dart
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/utilities/constants(login).dart';

class EmptyCheck extends StatefulWidget {
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

final Map<String, dynamic> jsonString2 = {
  'table1': {
    //테이블1
    'chair': {
      'up': 0, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 1
    },
    'object': {
      "notebook": 0, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 0, //가방 갯수
      "cup": 0 // 컵 갯수
    }
  },
  'table2': {
    //테이블2
    'chair': {
      'up':2, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 0
    },
    'object': {
      "notebook": 2, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 0, //가방 갯수
      "cup": 0 // 컵 갯수
    }
  },
  'table3': {
    //테이블3
    'chair': {
      'up': 1, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 3
    },
    'object': {
      "notebook": 1, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 2, //가방 갯수
      "cup": 2 // 컵 갯수
    }
  }
};
//바뀐거로


class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _noperson(Canvas canvas, Size size) {
    final icon = Icons.chair_outlined;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(text: String.fromCharCode(icon.codePoint),
        style: TextStyle(fontSize: 50.0,fontFamily: icon.fontFamily, color : Colors.grey[600]));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-25,-25));
    // Paint paint = Paint()
    //   ..color = Colors.grey
    //   ..style = PaintingStyle.fill;
    // canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_mask(Canvas canvas, Size size) {
    final icon = Icons.masks;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(text: String.fromCharCode(icon.codePoint),
        style: TextStyle(fontSize: 60.0,fontFamily: icon.fontFamily, color : Colors.white));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-30,-30));
    // Paint paint = Paint();
    //   ..color = Colors.blue
    //   ..style = PaintingStyle.fill;
    // canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_nomask(Canvas canvas, Size size) {
    final icon = Icons.person_outlined;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(text: String.fromCharCode(icon.codePoint),
        style: TextStyle(fontSize: 60.0,fontFamily: icon.fontFamily, color : Colors.red));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-30,-30));
    // Paint paint = Paint()
    //   ..color = Colors.red
    //   ..style = PaintingStyle.fill;
    // canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        jsonString2["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (jsonString2["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        jsonString2["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (jsonString2["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        jsonString2["table2"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        jsonString2["table2"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        jsonString2["table3"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        jsonString2["table3"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  // 테이블과 사람을 확인하여 빈자리 유무 확인
  void table1(Canvas canvas, Size size) {
    if (target == 't1' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table1"]['object']['notebook'] == 0) &&
          (jsonString2["table1"]['object']['book'] == 0) &&
          (jsonString2["table1"]['object']['bag'] == 0) &&
          (jsonString2["table1"]['object']['cup'] == 0) &&
          (jsonString2["table1"]['chair']['up'] == 0) &&
          (jsonString2["table1"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table2(Canvas canvas, Size size) {
    if (target == 't2' && jsonString2["table2"].keys.elementAt(1) == "object") {
      if ((jsonString2["table2"]['object']['notebook'] == 0) &&
          (jsonString2["table2"]['object']['book'] == 0) &&
          (jsonString2["table2"]['object']['bag'] == 0) &&
          (jsonString2["table2"]['object']['cup'] == 0) &&
          (jsonString2["table2"]['chair']['up'] == 0) &&
          (jsonString2["table2"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table3(Canvas canvas, Size size) {
    if (target == 't3' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table3"]['object']['notebook'] == 0) &&
          (jsonString2["table3"]['object']['book'] == 0) &&
          (jsonString2["table3"]['object']['bag'] == 0) &&
          (jsonString2["table3"]['object']['cup'] == 0) &&
          (jsonString2["table3"]['chair']['up'] == 0) &&
          (jsonString2["table3"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      if (jsonString2.keys.elementAt(i) == "table1") {
        //table1일경우
        table1_person(canvas, size);
        table1(canvas, size);
      } else if (jsonString2.keys.elementAt(i) == "table2") {
        //table2일경우만
        table2_person(canvas, size);
        table2(canvas, size);
      } else {
        table3_person(canvas, size);
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              SafeArea(
                child: Center(
                    child: Column(
                        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                        children: <Widget>[
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p2"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t2"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p4"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p5"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p6"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                        ])),
              )
            ],
          ),
        ),
      ),
    );
  }
}
```





## 회의

- 이미지 아이콘 변경 요청이 있었음
- 시안을 2개 정도 추가하여 진행 예정.
- 조원들의 원하는 모양의 아이콘의 모양은 따로 구글에서 얻은 뒤 편집할 예정.



## 이슈 

- 웹소켓 관련하여 현재 문제 발생









# 2022년 04월 05일



## 개발

- 아이콘.png 를 svg 로 변환 후, flutter아이콘 홈페이지에서 변환 진행 -> flutter 의 pubspec.yaml 에 추가

```
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/custom_icons.dart';
import 'package:sm7/utilities/constants(login).dart';

class EmptyCheck extends StatefulWidget {
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

final Map<String, dynamic> jsonString2 = {
  'table1': {
    //테이블1
    'chair': {
      'up': 2, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 1
    },
    'object': {
      "notebook": 0, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 0, //가방 갯수
      "cup": 0 // 컵 갯수
    }
  },
  'table2': {
    //테이블2
    'chair': {
      'up':2, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 0
    },
    'object': {
      "notebook": 2, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 0, //가방 갯수
      "cup": 0 // 컵 갯수
    }
  },
  'table3': {
    //테이블3
    'chair': {
      'up': 1, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
      'down': 3
    },
    'object': {
      "notebook": 1, //노트북 갯수
      "book": 0, //책 갯수
      "bag": 2, //가방 갯수
      "cup": 2 // 컵 갯수
    }
  }
};
//바뀐거로


class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _noperson(Canvas canvas, Size size) {
    final icon = Icons.chair_outlined;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(text: String.fromCharCode(icon.codePoint),
        style: TextStyle(fontSize: 50.0,fontFamily: icon.fontFamily, color : Colors.grey[600]));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-25,-25));
    // Paint paint = Paint()
    //   ..color = Colors.grey
    //   ..style = PaintingStyle.fill;
    // canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_mask(Canvas canvas, Size size) {
    // final icon = Icons.masks;
    final icon = CustomIcons.mask2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(text: String.fromCharCode(icon.codePoint),
        style: TextStyle(fontSize: 60.0,fontFamily: icon.fontFamily, color : Colors.green));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-30,-30));
    // Paint paint = Paint();
    //   ..color = Colors.blue
    //   ..style = PaintingStyle.fill;
    // canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_nomask(Canvas canvas, Size size) {
    // final icon = Icons.person_outlined;
    final icon = CustomIcons.mask2_2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(text: String.fromCharCode(icon.codePoint),
        style: TextStyle(fontSize: 60.0,fontFamily: icon.fontFamily, color : Colors.red));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-30,-30));
    // Paint paint = Paint()
    //   ..color = Colors.red
    //   ..style = PaintingStyle.fill;
    // canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        jsonString2["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (jsonString2["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        jsonString2["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (jsonString2["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        jsonString2["table2"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        jsonString2["table2"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        jsonString2["table3"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        jsonString2["table3"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  // 테이블과 사람을 확인하여 빈자리 유무 확인
  void table1(Canvas canvas, Size size) {
    if (target == 't1' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table1"]['object']['notebook'] == 0) &&
          (jsonString2["table1"]['object']['book'] == 0) &&
          (jsonString2["table1"]['object']['bag'] == 0) &&
          (jsonString2["table1"]['object']['cup'] == 0) &&
          (jsonString2["table1"]['chair']['up'] == 0) &&
          (jsonString2["table1"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table2(Canvas canvas, Size size) {
    if (target == 't2' && jsonString2["table2"].keys.elementAt(1) == "object") {
      if ((jsonString2["table2"]['object']['notebook'] == 0) &&
          (jsonString2["table2"]['object']['book'] == 0) &&
          (jsonString2["table2"]['object']['bag'] == 0) &&
          (jsonString2["table2"]['object']['cup'] == 0) &&
          (jsonString2["table2"]['chair']['up'] == 0) &&
          (jsonString2["table2"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table3(Canvas canvas, Size size) {
    if (target == 't3' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table3"]['object']['notebook'] == 0) &&
          (jsonString2["table3"]['object']['book'] == 0) &&
          (jsonString2["table3"]['object']['bag'] == 0) &&
          (jsonString2["table3"]['object']['cup'] == 0) &&
          (jsonString2["table3"]['chair']['up'] == 0) &&
          (jsonString2["table3"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      if (jsonString2.keys.elementAt(i) == "table1") {
        //table1일경우
        table1_person(canvas, size);
        table1(canvas, size);
      } else if (jsonString2.keys.elementAt(i) == "table2") {
        //table2일경우만
        table2_person(canvas, size);
        table2(canvas, size);
      } else {
        table3_person(canvas, size);
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              SafeArea(
                child: Center(
                    child: Column(
                        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                        children: <Widget>[
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p2"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t2"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p4"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p5"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p6"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                        ])),
              )
            ],
          ),
        ),
      ),
    );
  }
}
```



- SM7을 웹소켓과 연결하기
- 웹소켓은 새로고침 없이 화면을 변환하게 하며, 서버와 양방향 통신이다.(open <-> close)
- websocket은 양방향 소통을 위한 프로토콜이라면 socket.io는 양방햔 통신을 하기위해 웹소켓 프로토콜을 사용하는 라이브러리이다.

```
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/custom_icons.dart';
import 'package:sm7/utilities/constants(login).dart';
import 'package:flutter/foundation.dart';
import 'package:web_socket_channel/io.dart';
import 'package:web_socket_channel/web_socket_channel.dart';

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    final title = 'WebSocket Demo';
    return MaterialApp(
      home : EmptyCheck(
        title : title,
        channel: IOWebSocketChannel.connect("ws://35.77.144.191/ws/detectData")
      )
    );
  }
}

class EmptyCheck extends StatefulWidget {
  final String title;
  final WebSocketChannel channel;
  EmptyCheck({Key? key, required this.title, required this.channel})
      : super(key: key);
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

final Map<String, dynamic> jsonString2 = {
  // 'table1': {
  //   //테이블1
  //   'chair': {
  //     'up': 2, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
  //     'down': 0
  //   },
  //   'object': {
  //     "notebook": 0, //노트북 갯수
  //     "book": 0, //책 갯수
  //     "bag": 0, //가방 갯수
  //     "cup": 0 // 컵 갯수
  //   }
  // },
  // 'table2': {
  //   //테이블2
  //   'chair': {
  //     'up':2, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
  //     'down': 0
  //   },
  //   'object': {
  //     "notebook": 2, //노트북 갯수
  //     "book": 0, //책 갯수
  //     "bag": 0, //가방 갯수
  //     "cup": 0 // 컵 갯수
  //   }
  // },
  // 'table3': {
  //   //테이블3
  //   'chair': {
  //     'up': 1, //0빈자리, 1마스크한사람, 2마스크안한사람, 3error
  //     'down': 3
  //   },
  //   'object': {
  //     "notebook": 1, //노트북 갯수
  //     "book": 0, //책 갯수
  //     "bag": 2, //가방 갯수
  //     "cup": 2 // 컵 갯수
  //   }
  // }
};
//바뀐거로


class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _noperson(Canvas canvas, Size size) {
    final icon = Icons.chair_outlined;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(text: String.fromCharCode(icon.codePoint),
        style: TextStyle(fontSize: 50.0,fontFamily: icon.fontFamily, color : Colors.grey[600]));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-25,-25));
    // Paint paint = Paint()
    //   ..color = Colors.grey
    //   ..style = PaintingStyle.fill;
    // canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_mask(Canvas canvas, Size size) {
    // final icon = Icons.masks;
    final icon = CustomIcons.mask2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(text: String.fromCharCode(icon.codePoint),
        style: TextStyle(fontSize: 50.0,fontFamily: icon.fontFamily, color : Colors.green));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-25,-25));
    // Paint paint = Paint();
    //   ..color = Colors.blue
    //   ..style = PaintingStyle.fill;
    // canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void _person_nomask(Canvas canvas, Size size) {
    // final icon = Icons.person_outlined;
    final icon = CustomIcons.mask2_2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(text: String.fromCharCode(icon.codePoint),
        style: TextStyle(fontSize: 50.0,fontFamily: icon.fontFamily, color : Colors.red));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-25,-25));
    // Paint paint = Paint()
    //   ..color = Colors.red
    //   ..style = PaintingStyle.fill;
    // canvas.drawCircle(Offset(0, 0), 20, paint);
  }

  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        jsonString2["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (jsonString2["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        jsonString2["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (jsonString2["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        jsonString2["table2"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        jsonString2["table2"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        jsonString2["table3"]["chair"].keys.elementAt(0) == "up") {
      if (jsonString2["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        jsonString2["table3"]["chair"].keys.elementAt(1) == "down") {
      if (jsonString2["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (jsonString2["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  // 테이블과 사람을 확인하여 빈자리 유무 확인
  void table1(Canvas canvas, Size size) {
    if (target == 't1' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table1"]['object']['notebook'] == 0) &&
          (jsonString2["table1"]['object']['book'] == 0) &&
          (jsonString2["table1"]['object']['bag'] == 0) &&
          (jsonString2["table1"]['object']['cup'] == 0) &&
          (jsonString2["table1"]['chair']['up'] == 0) &&
          (jsonString2["table1"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table2(Canvas canvas, Size size) {
    if (target == 't2' && jsonString2["table2"].keys.elementAt(1) == "object") {
      if ((jsonString2["table2"]['object']['notebook'] == 0) &&
          (jsonString2["table2"]['object']['book'] == 0) &&
          (jsonString2["table2"]['object']['bag'] == 0) &&
          (jsonString2["table2"]['object']['cup'] == 0) &&
          (jsonString2["table2"]['chair']['up'] == 0) &&
          (jsonString2["table2"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  void table3(Canvas canvas, Size size) {
    if (target == 't3' && jsonString2["table1"].keys.elementAt(1) == "object") {
      if ((jsonString2["table3"]['object']['notebook'] == 0) &&
          (jsonString2["table3"]['object']['book'] == 0) &&
          (jsonString2["table3"]['object']['bag'] == 0) &&
          (jsonString2["table3"]['object']['cup'] == 0) &&
          (jsonString2["table3"]['chair']['up'] == 0) &&
          (jsonString2["table3"]['chair']['down'] == 0)
      ) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      if (jsonString2.keys.elementAt(i) == "table1") {
        //table1일경우
        table1_person(canvas, size);
        table1(canvas, size);
      } else if (jsonString2.keys.elementAt(i) == "table2") {
        //table2일경우만
        table2_person(canvas, size);
        table2(canvas, size);
      } else {
        table3_person(canvas, size);
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              SafeArea(
                child: Center(
                    child: Column(
                        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                        children: <Widget>[
                          StreamBuilder(
                            stream: widget.channel.stream,
                            builder: (context, snapshot) {
                              return Padding(
                                padding: const EdgeInsets.symmetric(vertical: 24.0),
                                child: Text(snapshot.hasData ? '${snapshot.data}' : ''),
                              );
                            },
                          ),
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t1"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p2"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t2"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p4"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p5"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("t3"),
                            ),
                          ),
                          SizedBox(
                            height: 50,
                          ),
                          Container(
                            // alignment: Alignment.center,
                            child: CustomPaint(
                              painter: myPainter("p6"),
                            ),
                          ),
                          SizedBox(
                            height: 80,
                          ),
                        ])),
              )
            ],
          ),
        ),
      ),
    );
  }
}
```





## 회의

- 플러터 내에서 json 스트림 빌더 및 웹소켓 코드 위치에 대한 문제
- json 파일이 웹소켓을 통해 들어오면, 파라미터를 처리하는 문제
- 그리고 아이콘이 출력이 되는가에 대한 확인 필요.



## 이슈 

- 웹소켓을 통해 화면에 출력되는 것을 확인, safeArea 를 넘어가지만 서버에서 데이터 전송시 json 파일을 수정하면 fix될 것으로 보임.



# 2022년 04월 06일

- 마스크, 노마스크 시안은 8번으로 결정됨 (수정 완료)
- EmptyCheck 화면에서 웹소켓의 데이터에 따라 화면이 변경됨은 확인되었으나, StreamBuilder 내에서 Text 내용이 같이 출력됨. (수정 필요)
- 화면 로딩 후 가장 처음 기본 null 값이 들어올 시 출력화면 수정필요(조건문 사용?)

## 개발

- 수정 전

```dart
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/custom_icons.dart';
import 'package:web_socket_channel/io.dart';
import 'package:web_socket_channel/web_socket_channel.dart';

class EmptyCheck_first extends StatelessWidget {
  const EmptyCheck_first({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
        home: EmptyCheck(
            //웹 소켓 채널 연결
            channel: IOWebSocketChannel.connect(
                "ws://35.77.144.191/ws/detectData")));
  }
}

class EmptyCheck extends StatefulWidget {
  final WebSocketChannel? channel;
  EmptyCheck({
    Key? key,
    this.channel,
  }) : super(key: key);
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

Map<String, dynamic>? result;
//초기값
Map<String, dynamic>? yolo_result = {
  // 테이블 / 0빈자리, 1마스크한사람, 2마스크안한사람 /  3error 노트북 갯수, 책 갯수, 가방 갯수, 컵 갯수
  'table1': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table2': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table3': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  }
};

class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -30) & const Size(160, 60), paint);
  }

  //빈자리
  void _noperson(Canvas canvas, Size size) {
    final icon = Icons.chair_outlined;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 50.0,
            fontFamily: icon.fontFamily,
            color: Colors.grey[600]));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-25, -25));
  }

  //마스크낀사람
  void _person_mask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 60.0, fontFamily: icon.fontFamily, color: Colors.green));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-30, -30));
  }

  //마스크안낀사람
  void _person_nomask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2_2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 60.0, fontFamily: icon.fontFamily, color: Colors.red));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-30, -30));
  }

  //table별 사람들 그리기
  //table1의 사람들
  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        yolo_result?["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (yolo_result?["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        yolo_result?["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (yolo_result?["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table2의 사람들
  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        yolo_result?["table2"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        yolo_result?["table2"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table3의 사람들
  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        yolo_result?["table3"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        yolo_result?["table3"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  // 테이블과 사람을 확인하여 빈자리 유무 확인
  //table1 그리기
  void table1(Canvas canvas, Size size) {
    if (target == 't1' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table1"]['object']['notebook'] == 0) &&
          (yolo_result?["table1"]['object']['book'] == 0) &&
          (yolo_result?["table1"]['object']['bag'] == 0) &&
          (yolo_result?["table1"]['object']['cup'] == 0) &&
          (yolo_result?["table1"]['chair']['up'] == 0) &&
          (yolo_result?["table1"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table2(Canvas canvas, Size size) {
    if (target == 't2' &&
        yolo_result?["table2"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table2"]['object']['notebook'] == 0) &&
          (yolo_result?["table2"]['object']['book'] == 0) &&
          (yolo_result?["table2"]['object']['bag'] == 0) &&
          (yolo_result?["table2"]['object']['cup'] == 0) &&
          (yolo_result?["table2"]['chair']['up'] == 0) &&
          (yolo_result?["table2"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table3(Canvas canvas, Size size) {
    if (target == 't3' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table3"]['object']['notebook'] == 0) &&
          (yolo_result?["table3"]['object']['book'] == 0) &&
          (yolo_result?["table3"]['object']['bag'] == 0) &&
          (yolo_result?["table3"]['object']['cup'] == 0) &&
          (yolo_result?["table3"]['chair']['up'] == 0) &&
          (yolo_result?["table3"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //그림 그리기 시작
  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      //table1일경우
      if (yolo_result?.keys.elementAt(i) == "table1") {
        //table1의 person
        table1_person(canvas, size);
        //table1
        table1(canvas, size);
        //table2일경우
      } else if (yolo_result?.keys.elementAt(i) == "table2") {
        //table2의 person
        table2_person(canvas, size);
        //table2
        table2(canvas, size);
        //table3일경우
      } else {
        //table3의 person
        table3_person(canvas, size);
        //table3
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              StreamBuilder(
                stream: widget.channel?.stream,
                builder: (context, snapshot) {
                  yolo_result = jsonDecode('${snapshot.data}');
                  return Padding(
                      padding: const EdgeInsets.symmetric(vertical: 24.0),
                      child: SafeArea(
                        child: Center(
                            child: Column(
                                mainAxisAlignment:
                                    MainAxisAlignment.spaceEvenly,
                                children: <Widget>[
                              Visibility(child: Text(yolo_result.toString()), visible: true,),
                              SizedBox(
                                height: 80,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p1"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t1"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p2"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p3"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t2"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p4"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p5"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t3"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p6"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                            ])),
                      ));
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}

```



- 투명도 및 위치 재설정

```dart
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/custom_icons.dart';
import 'package:web_socket_channel/io.dart';
import 'package:web_socket_channel/web_socket_channel.dart';

class EmptyCheck_first extends StatelessWidget {
  const EmptyCheck_first({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
        home: EmptyCheck(
            //웹 소켓 채널 연결
            channel: IOWebSocketChannel.connect(
                "ws://35.77.144.191/ws/detectData")));
  }
}

class EmptyCheck extends StatefulWidget {
  final WebSocketChannel? channel;
  EmptyCheck({
    Key? key,
    this.channel,
  }) : super(key: key);
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

Map<String, dynamic>? result;
//초기값
Map<String, dynamic>? yolo_result = {
  // 테이블 / 0빈자리, 1마스크한사람, 2마스크안한사람 /  3error 노트북 갯수, 책 갯수, 가방 갯수, 컵 갯수
  'table1': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table2': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table3': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  }
};

class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -25) & const Size(160, 50), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -25) & const Size(160, 50), paint);
  }

  //빈자리
  void _noperson(Canvas canvas, Size size) {
    final icon = Icons.chair_outlined;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 46.0,
            fontFamily: icon.fontFamily,
            color: Colors.grey[600]));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-23, -23));
  }

  //마스크낀사람
  void _person_mask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 48.0, fontFamily: icon.fontFamily, color: Colors.green));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-24, -24));
  }

  //마스크안낀사람
  void _person_nomask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2_2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 48.0, fontFamily: icon.fontFamily, color: Colors.red));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-24, -24));
  }

  //table별 사람들 그리기
  //table1의 사람들
  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        yolo_result?["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (yolo_result?["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        yolo_result?["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (yolo_result?["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table2의 사람들
  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        yolo_result?["table2"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        yolo_result?["table2"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table3의 사람들
  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        yolo_result?["table3"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        yolo_result?["table3"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  // 테이블과 사람을 확인하여 빈자리 유무 확인
  //table1 그리기
  void table1(Canvas canvas, Size size) {
    if (target == 't1' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table1"]['object']['notebook'] == 0) &&
          (yolo_result?["table1"]['object']['book'] == 0) &&
          (yolo_result?["table1"]['object']['bag'] == 0) &&
          (yolo_result?["table1"]['object']['cup'] == 0) &&
          (yolo_result?["table1"]['chair']['up'] == 0) &&
          (yolo_result?["table1"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table2(Canvas canvas, Size size) {
    if (target == 't2' &&
        yolo_result?["table2"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table2"]['object']['notebook'] == 0) &&
          (yolo_result?["table2"]['object']['book'] == 0) &&
          (yolo_result?["table2"]['object']['bag'] == 0) &&
          (yolo_result?["table2"]['object']['cup'] == 0) &&
          (yolo_result?["table2"]['chair']['up'] == 0) &&
          (yolo_result?["table2"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table3(Canvas canvas, Size size) {
    if (target == 't3' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table3"]['object']['notebook'] == 0) &&
          (yolo_result?["table3"]['object']['book'] == 0) &&
          (yolo_result?["table3"]['object']['bag'] == 0) &&
          (yolo_result?["table3"]['object']['cup'] == 0) &&
          (yolo_result?["table3"]['chair']['up'] == 0) &&
          (yolo_result?["table3"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //그림 그리기 시작
  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      //table1일경우
      if (yolo_result?.keys.elementAt(i) == "table1") {
        //table1의 person
        table1_person(canvas, size);
        //table1
        table1(canvas, size);
        //table2일경우
      } else if (yolo_result?.keys.elementAt(i) == "table2") {
        //table2의 person
        table2_person(canvas, size);
        //table2
        table2(canvas, size);
        //table3일경우
      } else {
        //table3의 person
        table3_person(canvas, size);
        //table3
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              // Visibility(child: Text(yolo_result.toString()),visible: true),
              StreamBuilder(
                stream: widget.channel?.stream,
                builder: (context, snapshot) {
                  yolo_result = jsonDecode('${snapshot.data}');
                  return Padding(
                      padding: const EdgeInsets.symmetric(vertical: 24.0),
                      child: SafeArea(
                        child: Center(
                            child: Column(
                                mainAxisAlignment:
                                    MainAxisAlignment.spaceEvenly,
                                children: <Widget>[
                              Text(yolo_result.toString(), style: TextStyle(color : Colors.black.withOpacity(0))),
                              SizedBox(
                                height: 5,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p1"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t1"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p2"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p3"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t2"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p4"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p5"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t3"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p6"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                            ])),
                      ));
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}

```

```dart
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/custom_icons.dart';
import 'package:web_socket_channel/io.dart';
import 'package:web_socket_channel/web_socket_channel.dart';

class EmptyCheck_first extends StatelessWidget {
  const EmptyCheck_first({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
        home: EmptyCheck(
            //웹 소켓 채널 연결
            channel: IOWebSocketChannel.connect(
                "ws://35.77.144.191/ws/detectData")));
  }
}

class EmptyCheck extends StatefulWidget {
  final WebSocketChannel? channel;
  EmptyCheck({
    Key? key,
    this.channel,
  }) : super(key: key);
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

Map<String, dynamic>? result;
//초기값
Map<String, dynamic>? yolo_result = {
  // 테이블 / 0빈자리, 1마스크한사람, 2마스크안한사람 /  3error 노트북 갯수, 책 갯수, 가방 갯수, 컵 갯수
  'table1': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table2': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table3': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  }
};

// Map<String, dynamic>? yolo_result2 = yolo_result;

class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -24) & const Size(160, 48), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -24) & const Size(160, 48), paint);
  }

  //빈자리
  void _noperson(Canvas canvas, Size size) {
    final icon = Icons.chair_outlined;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 46.0,
            fontFamily: icon.fontFamily,
            color: Colors.grey[600]));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-23, -23));
  }

  //마스크낀사람
  void _person_mask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 48.0, fontFamily: icon.fontFamily, color: Colors.green));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-24, -24));
  }

  //마스크안낀사람
  void _person_nomask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2_2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 48.0, fontFamily: icon.fontFamily, color: Colors.red));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-24, -24));
  }

  //table별 사람들 그리기
  //table1의 사람들
  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        yolo_result?["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (yolo_result?["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        yolo_result?["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (yolo_result?["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table2의 사람들
  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        yolo_result?["table2"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        yolo_result?["table2"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table3의 사람들
  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        yolo_result?["table3"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        yolo_result?["table3"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  // 테이블과 사람을 확인하여 빈자리 유무 확인
  //table1 그리기
  void table1(Canvas canvas, Size size) {
    if (target == 't1' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table1"]['object']['notebook'] == 0) &&
          (yolo_result?["table1"]['object']['book'] == 0) &&
          (yolo_result?["table1"]['object']['bag'] == 0) &&
          (yolo_result?["table1"]['object']['cup'] == 0) &&
          (yolo_result?["table1"]['chair']['up'] == 0) &&
          (yolo_result?["table1"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table2(Canvas canvas, Size size) {
    if (target == 't2' &&
        yolo_result?["table2"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table2"]['object']['notebook'] == 0) &&
          (yolo_result?["table2"]['object']['book'] == 0) &&
          (yolo_result?["table2"]['object']['bag'] == 0) &&
          (yolo_result?["table2"]['object']['cup'] == 0) &&
          (yolo_result?["table2"]['chair']['up'] == 0) &&
          (yolo_result?["table2"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table3(Canvas canvas, Size size) {
    if (target == 't3' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table3"]['object']['notebook'] == 0) &&
          (yolo_result?["table3"]['object']['book'] == 0) &&
          (yolo_result?["table3"]['object']['bag'] == 0) &&
          (yolo_result?["table3"]['object']['cup'] == 0) &&
          (yolo_result?["table3"]['chair']['up'] == 0) &&
          (yolo_result?["table3"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //그림 그리기 시작
  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      //table1일경우
      if (yolo_result?.keys.elementAt(i) == "table1") {
        //table1의 person
        table1_person(canvas, size);
        //table1
        table1(canvas, size);
        //table2일경우
      } else if (yolo_result?.keys.elementAt(i) == "table2") {
        //table2의 person
        table2_person(canvas, size);
        //table2
        table2(canvas, size);
        //table3일경우
      } else {
        //table3의 person
        table3_person(canvas, size);
        //table3
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              // Visibility(child: Text(yolo_result.toString()),visible: true),
              StreamBuilder(
                // initialData: yolo_result_initial,
                stream: widget.channel?.stream,
                builder: (context, snapshot) {
                  if (snapshot.data == null) {
                    return Center(child: CircularProgressIndicator());
                    //   Container(
                    //     child: Center(
                    //         child:
                    //         Text( "Loading...", style: TextStyle(fontSize: 25, color: Colors.white),
                    // )));
                  } else
                    yolo_result = jsonDecode('${snapshot.data}');
                  return Padding(
                      padding: const EdgeInsets.symmetric(vertical: 24.0),
                      child: SafeArea(
                        child: Center(
                            child: Column(
                                mainAxisAlignment:
                                    MainAxisAlignment.spaceEvenly,
                                children: <Widget>[
                              Text(yolo_result.toString(),
                                  style: TextStyle(
                                      fontSize: 5,
                                      color: Colors.black.withOpacity(0))),
                              SizedBox(
                                height: 45,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p1"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t1"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p2"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p3"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t2"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p4"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p5"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t3"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p6"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                            ])),
                      ));
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}

```

- snapshot.data 가 null 값으로 인식될 경우 'Loading'  문구 출력 완료
  - Loading 문구 대신 CircularProgressIndicator 시각화로 변경 완료
- aws 데이터 전송시 같이 출력되던 jsonString 처리 완료



## 회의



## 이슈 

- SM7 이 어플에서는 구동이 되나, 웹에서 구동이 안되는 문제 (웹소켓 버전 문제 확인필요)
- yolo 카메라 연결 수정 필요
- 발표 자료 준비 진행중



# 2022년 04월 07일

## 개발

- SM7의 EmptyCheck.dart 웹에서 구동이 안되는 문제 해결 완료(웹소켓 라이브러리 호환문제)

```dart
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/custom_icons.dart';
// import 'package:web_socket_channel/io.dart';
import 'package:web_socket_channel/web_socket_channel.dart';

class EmptyCheck_first extends StatelessWidget {
  const EmptyCheck_first({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
        home: EmptyCheck(
          //웹 소켓 채널 연결
            channel: WebSocketChannel.connect(
                Uri.parse('ws://35.77.144.191/ws/detectData'))));
  }
}

class EmptyCheck extends StatefulWidget {
  final WebSocketChannel? channel;
  EmptyCheck({
    Key? key,
    this.channel,
  }) : super(key: key);
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

Map<String, dynamic>? result;
//초기값
Map<String, dynamic>? yolo_result = {
  // 테이블 / 0빈자리, 1마스크한사람, 2마스크안한사람 /  3error 노트북 갯수, 책 갯수, 가방 갯수, 컵 갯수
  'table1': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table2': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table3': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  }
};

// Map<String, dynamic>? yolo_result2 = yolo_result;

class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -24) & const Size(160, 48), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -24) & const Size(160, 48), paint);
  }

  //빈자리
  void _noperson(Canvas canvas, Size size) {
    final icon = Icons.chair_outlined;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 46.0,
            fontFamily: icon.fontFamily,
            color: Colors.grey[600]));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-23, -23));
  }

  //마스크낀사람
  void _person_mask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 48.0, fontFamily: icon.fontFamily, color: Colors.green));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-24, -24));
  }

  //마스크안낀사람
  void _person_nomask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2_2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 48.0, fontFamily: icon.fontFamily, color: Colors.red));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-24, -24));
  }

  //table별 사람들 그리기
  //table1의 사람들
  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        yolo_result?["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (yolo_result?["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        yolo_result?["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (yolo_result?["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table2의 사람들
  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        yolo_result?["table2"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        yolo_result?["table2"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table3의 사람들
  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        yolo_result?["table3"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        yolo_result?["table3"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  // 테이블과 사람을 확인하여 빈자리 유무 확인
  //table1 그리기
  void table1(Canvas canvas, Size size) {
    if (target == 't1' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table1"]['object']['notebook'] == 0) &&
          (yolo_result?["table1"]['object']['book'] == 0) &&
          (yolo_result?["table1"]['object']['bag'] == 0) &&
          (yolo_result?["table1"]['object']['cup'] == 0) &&
          (yolo_result?["table1"]['chair']['up'] == 0) &&
          (yolo_result?["table1"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table2(Canvas canvas, Size size) {
    if (target == 't2' &&
        yolo_result?["table2"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table2"]['object']['notebook'] == 0) &&
          (yolo_result?["table2"]['object']['book'] == 0) &&
          (yolo_result?["table2"]['object']['bag'] == 0) &&
          (yolo_result?["table2"]['object']['cup'] == 0) &&
          (yolo_result?["table2"]['chair']['up'] == 0) &&
          (yolo_result?["table2"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table3(Canvas canvas, Size size) {
    if (target == 't3' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table3"]['object']['notebook'] == 0) &&
          (yolo_result?["table3"]['object']['book'] == 0) &&
          (yolo_result?["table3"]['object']['bag'] == 0) &&
          (yolo_result?["table3"]['object']['cup'] == 0) &&
          (yolo_result?["table3"]['chair']['up'] == 0) &&
          (yolo_result?["table3"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //그림 그리기 시작
  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      //table1일경우
      if (yolo_result?.keys.elementAt(i) == "table1") {
        //table1의 person
        table1_person(canvas, size);
        //table1
        table1(canvas, size);
        //table2일경우
      } else if (yolo_result?.keys.elementAt(i) == "table2") {
        //table2의 person
        table2_person(canvas, size);
        //table2
        table2(canvas, size);
        //table3일경우
      } else {
        //table3의 person
        table3_person(canvas, size);
        //table3
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              // Visibility(child: Text(yolo_result.toString()),visible: true),
              StreamBuilder(
                // initialData: yolo_result_initial,
                stream: widget.channel?.stream,
                builder: (context, snapshot) {
                  if (snapshot.data == null) {
                    return Center(child: CircularProgressIndicator());
                    //   Container(
                    //     child: Center(
                    //         child:
                    //         Text( "Loading...", style: TextStyle(fontSize: 25, color: Colors.white),
                    // )));
                  } else
                    yolo_result = jsonDecode('${snapshot.data}');
                  return Padding(
                      padding: const EdgeInsets.symmetric(vertical: 24.0),
                      child: SafeArea(
                        child: Center(
                            child: Column(
                                mainAxisAlignment:
                                MainAxisAlignment.spaceEvenly,
                                children: <Widget>[
                                  Text(yolo_result.toString(),
                                      style: TextStyle(
                                          fontSize: 5,
                                          color: Colors.black.withOpacity(0))),
                                  SizedBox(
                                    height: 45,
                                  ),
                                  Container(
                                    // alignment: Alignment.center,
                                    child: CustomPaint(
                                      painter: myPainter("p1"),
                                    ),
                                  ),
                                  SizedBox(
                                    height: 50,
                                  ),
                                  Container(
                                    // alignment: Alignment.center,
                                    child: CustomPaint(
                                      painter: myPainter("t1"),
                                    ),
                                  ),
                                  SizedBox(
                                    height: 50,
                                  ),
                                  Container(
                                    // alignment: Alignment.center,
                                    child: CustomPaint(
                                      painter: myPainter("p2"),
                                    ),
                                  ),
                                  SizedBox(
                                    height: 80,
                                  ),
                                  Container(
                                    // alignment: Alignment.center,
                                    child: CustomPaint(
                                      painter: myPainter("p3"),
                                    ),
                                  ),
                                  SizedBox(
                                    height: 50,
                                  ),
                                  Container(
                                    // alignment: Alignment.center,
                                    child: CustomPaint(
                                      painter: myPainter("t2"),
                                    ),
                                  ),
                                  SizedBox(
                                    height: 50,
                                  ),
                                  Container(
                                    // alignment: Alignment.center,
                                    child: CustomPaint(
                                      painter: myPainter("p4"),
                                    ),
                                  ),
                                  SizedBox(
                                    height: 80,
                                  ),
                                  Container(
                                    // alignment: Alignment.center,
                                    child: CustomPaint(
                                      painter: myPainter("p5"),
                                    ),
                                  ),
                                  SizedBox(
                                    height: 50,
                                  ),
                                  Container(
                                    // alignment: Alignment.center,
                                    child: CustomPaint(
                                      painter: myPainter("t3"),
                                    ),
                                  ),
                                  SizedBox(
                                    height: 50,
                                  ),
                                  Container(
                                    // alignment: Alignment.center,
                                    child: CustomPaint(
                                      painter: myPainter("p6"),
                                    ),
                                  ),
                                  SizedBox(
                                    height: 80,
                                  ),
                                ])),
                      ));
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```



## 회의

- 발표를 위한 PPT 제작 진행

  

## 이슈 

- 웹상에서 db에 연결된 정보로 로그인이 되지 않는 문제 (앱에서는 작동)
- 웹상에서 yolov5 카메라가 작동이 안되는 문제 (앱에서는 작동)





# 2022년 04월 08일

- 좌석&마스크 페이지 appBar에서 뒤로 가기가 안보이는 문제 발생
  - Streambuilder 위젯을 만들기 위해 Stateless 위젯을 하나 더 만들었는데, 그 부분을 살펴볼 필요가 있어보임.
  - 페이지 이동으로 단순 구현할 경우, 안드로이드 상 뒤로가기 버튼을 다시 두번 눌러야하므로, 어느 쪽이든 버튼을 두번 눌러야함.
- 발표준비





# 2022년 04월 09일

## 멘토님 피드백

- 커피를 쏟았을 때의 상황도 반영하면 좋을 듯 함.
- 웹소켓을 사용한 이유
- 보완사항 : 외부 심사위원들이 자료를 판단할때 도움을 줄만한 정보를 추가해야 함. 약간의 Description이 추가 되어야함.

- 14페이지 애니메이션 효과를 통해 설명이 그렇게 와닿지 않았음.(페이지를 차라리 나누는 것이 좋아보임, 왜 시도하게 된 이유 등을 넣어야함)
- 17페이지도 심플하긴 하나, 구체적인 내용이 더 들어가야 할 것 같음.
- 20페이지 시스템 아키텍쳐(레이어) 표현은 굉장히 좋았음. (flow 표현도 더 낫지 않을까)
- 문제에 봉착 -> 해결 과정을 별도의 페이지에 정리하여, 이러한 노력들을 하였다는 것을 담으면 좋을 듯 함.
- 마지막 페이지에 프로젝트를 통해, 배우고, 느낀 점 등을 정리하여 어필.
- 시연 연상이 느릴 경우, 미리 영상을 캡처하여 준비하는 것이 좋음.(영상을 미리 찍어두는 것도 좋음), 만약의 상황을 대비할 것.
- 팀워크가 좋은 것이 느껴짐.(Good)
- 포트폴리오를 할 때, 개인이 했던 부분을 잘 어필할 수 있도록 준비해야 함.
- 프로젝트 수행하면서, 실패의 과정도 매우 중요, 포트폴리오에 담아 볼 것.

- 본인들이 한 작업을 잘 녹여낼 수 있게해야함.





## 회의





## 이슈 







# 2022년 04월 11일

## 개발

- 어플리케이션 내의 debug  문구 삭제 필요
- Empty_check 내의 뒤로가기 미지원문제

```dart
// ignore_for_file: prefer_const_constructors

import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:sm7/custom_icons.dart';
import 'package:sm7/menuPage.dart';
// import 'package:web_socket_channel/io.dart';
import 'package:web_socket_channel/web_socket_channel.dart';

class EmptyCheck_first extends StatelessWidget {
  const EmptyCheck_first({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
        debugShowCheckedModeBanner: false,
        home: EmptyCheck(
            //웹 소켓 채널 연결
            channel: WebSocketChannel.connect(
                Uri.parse('ws://35.77.144.191/ws/detectData'))));
  }
}

class EmptyCheck extends StatefulWidget {
  final WebSocketChannel? channel;
  const EmptyCheck({
    Key? key,
    this.channel,
  }) : super(key: key);
  @override
  _EmptyCheckState createState() => _EmptyCheckState();
}

Map<String, dynamic>? result;
//초기값
Map<String, dynamic>? yolo_result = {
  // 테이블 / 0빈자리, 1마스크한사람, 2마스크안한사람 /  3error 노트북 갯수, 책 갯수, 가방 갯수, 컵 갯수
  'table1': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table2': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  },
  'table3': {
    'chair': {'up': 0, 'down': 0},
    'object': {"notebook": 0, "book": 0, "bag": 0, "cup": 0}
  }
};

// Map<String, dynamic>? yolo_result2 = yolo_result;

class myPainter extends CustomPainter {
  String target;
  myPainter(this.target);

  void _emptytable(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.grey
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -24) & const Size(160, 48), paint);
  }

  void _table(Canvas canvas, Size size) {
    Paint paint = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.fill;
    canvas.drawRect(Offset(-80, -24) & const Size(160, 48), paint);
  }

  //빈자리
  void _noperson(Canvas canvas, Size size) {
    final icon = Icons.chair_outlined;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 46.0,
            fontFamily: icon.fontFamily,
            color: Colors.grey[600]));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-23, -23));
  }

  //마스크낀사람
  void _person_mask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 48.0, fontFamily: icon.fontFamily, color: Colors.green));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-24, -24));
  }

  //마스크안낀사람
  void _person_nomask(Canvas canvas, Size size) {
    final icon = CustomIcons.mask2_2;
    TextPainter textPainter = TextPainter(textDirection: TextDirection.rtl);
    textPainter.text = TextSpan(
        text: String.fromCharCode(icon.codePoint),
        style: TextStyle(
            fontSize: 48.0, fontFamily: icon.fontFamily, color: Colors.red));
    textPainter.layout();
    textPainter.paint(canvas, Offset(-24, -24));
  }

  //table별 사람들 그리기
  //table1의 사람들
  void table1_person(Canvas canvas, Size size) {
    //p2, table1
    if (target == "p1" &&
        yolo_result?["table1"]["chair"].keys.elementAt(0) == "up") {
      //p1, table1, up
      if (yolo_result?["table1"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p2" &&
        yolo_result?["table1"]["chair"].keys.elementAt(1) == "down") {
      //p2, table, down
      if (yolo_result?["table1"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table1"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table2의 사람들
  void table2_person(Canvas canvas, Size size) {
    if (target == "p3" &&
        yolo_result?["table2"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table2"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p4" &&
        yolo_result?["table2"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table2"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table2"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  //table3의 사람들
  void table3_person(Canvas canvas, Size size) {
    if (target == "p5" &&
        yolo_result?["table3"]["chair"].keys.elementAt(0) == "up") {
      if (yolo_result?["table3"]["chair"]["up"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["up"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    } else if (target == "p6" &&
        yolo_result?["table3"]["chair"].keys.elementAt(1) == "down") {
      if (yolo_result?["table3"]["chair"]["down"] == 0) {
        _noperson(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 1) {
        _person_mask(canvas, size);
      } else if (yolo_result?["table3"]["chair"]["down"] == 2) {
        _person_nomask(canvas, size);
      } else {
        _person_nomask(canvas, size);
      }
    }
  }

  // 테이블과 사람을 확인하여 빈자리 유무 확인
  //table1 그리기
  void table1(Canvas canvas, Size size) {
    if (target == 't1' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table1"]['object']['notebook'] == 0) &&
          (yolo_result?["table1"]['object']['book'] == 0) &&
          (yolo_result?["table1"]['object']['bag'] == 0) &&
          (yolo_result?["table1"]['object']['cup'] == 0) &&
          (yolo_result?["table1"]['chair']['up'] == 0) &&
          (yolo_result?["table1"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table2(Canvas canvas, Size size) {
    if (target == 't2' &&
        yolo_result?["table2"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table2"]['object']['notebook'] == 0) &&
          (yolo_result?["table2"]['object']['book'] == 0) &&
          (yolo_result?["table2"]['object']['bag'] == 0) &&
          (yolo_result?["table2"]['object']['cup'] == 0) &&
          (yolo_result?["table2"]['chair']['up'] == 0) &&
          (yolo_result?["table2"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //table3 그리기
  void table3(Canvas canvas, Size size) {
    if (target == 't3' &&
        yolo_result?["table1"].keys.elementAt(1) == "object") {
      if ((yolo_result?["table3"]['object']['notebook'] == 0) &&
          (yolo_result?["table3"]['object']['book'] == 0) &&
          (yolo_result?["table3"]['object']['bag'] == 0) &&
          (yolo_result?["table3"]['object']['cup'] == 0) &&
          (yolo_result?["table3"]['chair']['up'] == 0) &&
          (yolo_result?["table3"]['chair']['down'] == 0)) {
        _emptytable(canvas, size);
      } else {
        _table(canvas, size);
      }
    }
  }

  //그림 그리기 시작
  @override
  void paint(Canvas canvas, Size size) {
    for (int i = 0; i < 3; i++) {
      //table1일경우
      if (yolo_result?.keys.elementAt(i) == "table1") {
        //table1의 person
        table1_person(canvas, size);
        //table1
        table1(canvas, size);
        //table2일경우
      } else if (yolo_result?.keys.elementAt(i) == "table2") {
        //table2의 person
        table2_person(canvas, size);
        //table2
        table2(canvas, size);
        //table3일경우
      } else {
        //table3의 person
        table3_person(canvas, size);
        //table3
        table3(canvas, size);
      }
    }
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) {
    return false;
  }
}

class _EmptyCheckState extends State<EmptyCheck> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text("좌석 & 마스크 확인", style: TextStyle(fontSize: 20.0)),
        backgroundColor: Colors.black,
        centerTitle: true,
        elevation: 0.0,
        leading: IconButton(
          icon: Icon(Icons.arrow_back),
          onPressed: () {
            Navigator.pop(context);
            },
        ),
      ),
      body: AnnotatedRegion<SystemUiOverlayStyle>(
        value: SystemUiOverlayStyle.light,
        child: GestureDetector(
          onTap: () => FocusScope.of(context).unfocus(),
          child: Stack(
            children: <Widget>[
              Container(
                height: double.infinity,
                width: double.infinity,
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: const [
                      Color.fromARGB(195, 0, 0, 0),
                      Color.fromARGB(215, 0, 0, 0),
                      Color.fromARGB(235, 0, 0, 0),
                      Color.fromARGB(252, 0, 0, 0),
                    ],
                    stops: const [0.1, 0.4, 0.7, 0.9],
                  ),
                ),
              ),
              // Visibility(child: Text(yolo_result.toString()),visible: true),
              StreamBuilder(
                // initialData: yolo_result_initial,
                stream: widget.channel?.stream,
                builder: (context, snapshot) {
                  if (snapshot.data == null) {
                    return Center(child: CircularProgressIndicator());
                    //   # 아래 방법은 문구 출력
                    //   Container(
                    //     child: Center(
                    //         child:
                    //         Text( "Loading...", style: TextStyle(fontSize: 25, color: Colors.white),
                    // )));
                  } else
                    yolo_result = jsonDecode('${snapshot.data}');
                  return Padding(
                      padding: const EdgeInsets.symmetric(vertical: 24.0),
                      child: SafeArea(
                        child: Center(
                            child: Column(
                                mainAxisAlignment:
                                    MainAxisAlignment.spaceEvenly,
                                children: <Widget>[
                              Text(yolo_result.toString(),
                                  style: TextStyle(
                                      fontSize: 5,
                                      color: Colors.black.withOpacity(0))),
                              SizedBox(
                                height: 45,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p1"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t1"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p2"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p3"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t2"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p4"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p5"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("t3"),
                                ),
                              ),
                              SizedBox(
                                height: 50,
                              ),
                              Container(
                                // alignment: Alignment.center,
                                child: CustomPaint(
                                  painter: myPainter("p6"),
                                ),
                              ),
                              SizedBox(
                                height: 80,
                              ),
                            ])),
                      ));
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}

```



## 회의

- Debug 문구 삭제 완료
- 뒤로 가기 문제는 현재 경로를 변경하여 수정해야 하므로 다소 복잡해짐
- 에러 아이콘 제작 및 Empty_check 코드 수정 필요



## 이슈 

- 웹 실행 문제 및 카카오톡 로그인







# 2022년 03월 15일



## 개발



## 회의



## 이슈 



# 2022년 03월 15일



## 개발



## 회의



## 이슈 



# 2022년 03월 15일



## 개발



## 회의



## 이슈 



# 2022년 03월 15일



## 개발



## 회의



## 이슈 



# 2022년 03월 15일



## 개발



## 회의



## 이슈 



